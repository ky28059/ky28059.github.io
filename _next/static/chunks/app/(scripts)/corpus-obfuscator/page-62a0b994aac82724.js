(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[680],{49123:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var s=n(95155),a=n(42325);function r(e){return(0,s.jsx)(a.A,{language:e.language,codeTagProps:{style:{}},showLineNumbers:!0,useInlineStyles:!1,children:e.children})}},50674:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});var s=n(95155),a=n(49123);function r(e){return(0,s.jsxs)("div",{className:e.className,children:[(0,s.jsxs)("p",{className:"text-xs bg-black/10 rounded-t-lg px-4 py-0.5 text-secondary",children:["Code",e.language&&" (".concat(e.language,")"),":"," ",(0,s.jsx)("button",{onClick:()=>navigator.clipboard.writeText(e.children),className:"hover:underline",children:"(copy)"})]}),(0,s.jsx)("div",{className:"rounded-b-lg overflow-hidden text-xs",children:(0,s.jsx)(a.A,{language:e.language,children:e.children})})]})}},60205:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var s=n(95155),a=n(12115);function r(e){let t=(0,a.useRef)(null),{onChange:n,...r}=e;function l(){let e=t.current;e&&(e.style.height="auto",e.style.height=e.scrollHeight+8+"px")}return(0,a.useLayoutEffect)(()=>{l()},[]),(0,s.jsx)("textarea",{ref:t,onChange:e=>{null==n||n(e),l()},...r})}},86853:(e,t,n)=>{Promise.resolve().then(n.bind(n,94119))},94119:(e,t,n)=>{"use strict";n.d(t,{default:()=>c});var s=n(95155),a=n(12115),r=n(60205),l=n(50674),i=n(49123);function o(e){return(0,s.jsx)("code",{className:"text-primary bg-black/20 rounded p-1",children:e.children})}function c(){let[e,t]=(0,a.useState)(x),{defineString:n,parsedString:i,wordCounts:c,tokens:m,errors:g}=(0,a.useMemo)(()=>{let t=[...e.matchAll(/\b[a-zA-Z]+\b/g)],n={};for(let[e]of t)n[e]||(n[e]=0),n[e]++;let s=Math.max(...Object.keys(n).map(e=>e.length)),a=Object.entries(n).filter(e=>{let[t,n]=e;return isNaN(Number(t))}),r=RegExp("\\b(?:".concat(a.filter(e=>{let[t,n]=e;return n>1}).map(e=>{let[t,n]=e;return t}).join("|"),")\\b"),"g"),l=e.replaceAll(r,""),i=l.split(RegExp("\\s+|(?<=\\W)|(?=\\W)")).filter(e=>!!e),o={},c="struct tbnlw{int srlpn;}tbnlw_o;int main(void){",d=[];for(let e=0;e<i.length;e++){let t=i[e],s=i[e+1],a=i[e+2];if(!/^[a-zA-Z]+$/.test(t)){0===e&&d.push("Corpus does not begin with controllable token."),p(t)||t in n||d.push("Invalid token `".concat(t,"` in corpus"));continue}let r=c,m=!1;c="",","===s?(r+="(void)((void)0",c="0);"+c,m=!0):"."===s?(r+="(void)tbnlw_o",c="srlpn;"+c,m=!0):"?"===s?(r+="(void)(0",c="0:0);"+c,m=!0):":"===s?(r+="(void)(0?0",c="0);"+c,m=!0):h.includes(s)?(r+="(void)",c="0;"+c,m=!0):u.includes(s)?(r+="(void)(0",c="1);"+c,m=!0):Number(s)&&(r+="(void)",c+=";",m=!0),m&&p(a)&&d.push("Special character followed by uncontrollable token after token `".concat(t,"`")),m&&e++,e===i.length-1&&(r+="}"),l=l.replaceAll(RegExp("\\b".concat(t,"\\b"),"g"),r||"/* ".concat(t," */")),o[t]=r||"// free"}return c&&d.push("Corpus does not end with controllable token."),console.log(i,o),{defineString:a.map(e=>{var t;let[n,a]=e;return"#define ".concat(n).concat(a>1?"":"".concat(" ".repeat(s-n.length)," ").concat(null!=(t=o[n])?t:""))}).join("\n"),parsedString:l,wordCounts:n,tokens:i,errors:d}},[e]);return(0,s.jsxs)("div",{className:"flex gap-6 flex-col-reverse xl:flex-row",children:[(0,s.jsxs)("div",{className:"flex-grow [&>pre]:h-max min-w-0",children:[(0,s.jsxs)("p",{className:"my-4",children:["The main idea goal of this obfuscator is being able to format any C program into a given block of English text using ",(0,s.jsx)(o,{children:"#define"})," macros and other tricks to get there."]}),(0,s.jsxs)("p",{className:"my-4",children:["Furthermore, code generated by this obfuscator should compile successfully with"," ",(0,s.jsx)(o,{children:"-Wall -Werror"}),"."]}),(0,s.jsx)("p",{className:"mt-4 mb-3",children:"First, we need to figure out what tokens we have in the text to work with. We can extract all word matches from the corpus using Regex, giving us the following word counts:"}),(0,s.jsx)(l.default,{language:"js",children:JSON.stringify(c)}),(0,s.jsx)("p",{className:"my-4",children:"To prevent saturating the generation process with overly convoluted computations, we first remove all tokens that are duplicated across the text. This means that the script is sometimes unable to calculate an optimal solution, but also makes it a lot more feasible to write."}),(0,s.jsx)("p",{className:"mt-4 mb-3",children:"Then, the parsed string is tokenized into the following tokens:"}),(0,s.jsx)(l.default,{language:"js",children:JSON.stringify(m)}),(0,s.jsxs)("p",{className:"my-4",children:["If each token contained only valid variable names, we'd be done. However, symbols like"," ",(0,s.jsx)(o,{children:"."})," or ",(0,s.jsx)(o,{children:","}),' cannot be overridden via macro; the script will attempt to "escape" them using surrounding controllable tokens instead.']}),(0,s.jsx)("p",{className:"my-4",children:"The basic strategy for doing so is as follows:"}),(0,s.jsxs)("ul",{className:"list-disc list-outside pl-6 text-pretty space-y-3",children:[(0,s.jsxs)("li",{children:["Attempt to escape integer literals by wrapping it in",(0,s.jsx)(d,{children:"(void) [token];"})]}),(0,s.jsxs)("li",{children:["Attempt to escape any valid unary operator (e.g."," ",(0,s.jsx)("span",{className:"inline-flex gap-1",children:h.map(e=>(0,s.jsx)(o,{children:e},e))}),") by wrapping it in",(0,s.jsx)(d,{children:"(void) [operator] 0;"})]}),(0,s.jsxs)("li",{children:["Attempt to escape any valid binary operator (e.g."," ",(0,s.jsx)("span",{className:"inline-flex gap-1",children:u.map(e=>(0,s.jsx)(o,{children:e},e))}),") by wrapping it in",(0,s.jsx)(d,{children:"(void)(0 [operator] 1);"}),(0,s.jsxs)("em",{className:"text-secondary text-sm",children:["(1 is used on the right to prevent division by zero errors with ",(0,s.jsx)(o,{children:"/"}),"and ",(0,s.jsx)(o,{children:"%"}),".)"]})]}),(0,s.jsxs)("li",{children:["Attempt to escape ",(0,s.jsx)(o,{children:","})," by wrapping it in",(0,s.jsx)(d,{children:"(void)((void)0,0);"}),(0,s.jsx)("em",{className:"text-secondary text-sm",children:"(a discarded comma operator expression.)"})]}),(0,s.jsxs)("li",{children:["Attempt to escape ",(0,s.jsx)(o,{children:"."})," by wrapping it in",(0,s.jsx)(d,{children:"(void)obj.prop;"}),(0,s.jsxs)("em",{className:"text-secondary text-sm",children:["(a discarded access to some property on some object. This is used instead of something like ",(0,s.jsx)(o,{children:"0.0"})," because object property access is valid across newlines, while a float literal is not.)"]})]}),(0,s.jsxs)("li",{children:["Attempt to escape ",(0,s.jsx)(o,{children:"?"})," and ",(0,s.jsx)(o,{children:":"})," by wrapping it in",(0,s.jsx)(d,{children:"(void)(0?0:0);"}),(0,s.jsx)("em",{className:"text-secondary text-sm",children:"(a discarded ternary expression.)"})]})]}),(0,s.jsxs)("p",{className:"my-4",children:["Unfortunately, ",(0,s.jsx)(o,{children:"-Werror"})," causes compilation to fail on unclosed quotes in ",(0,s.jsx)(o,{children:"#define"})," macros, and because macros can't insert block comments into code there are certain text sequences that are simply impossible to escape. These include:"]}),(0,s.jsxs)("ul",{className:"list-disc list-outside pl-6 text-pretty",children:[(0,s.jsx)("li",{children:"Any corpus that starts with an uncontrollable token."}),(0,s.jsx)("li",{children:"Any corpus that ends with an uncontrollable token."}),(0,s.jsx)("li",{children:"Any invalid token (i.e. a token that starts with a number that isn't a valid number literal)."}),(0,s.jsxs)("li",{children:["Two ",(0,s.jsx)(o,{children:","}),"s in a row without a controllable token in between."]}),(0,s.jsx)("li",{children:"Any special character proceeded by an incompatible, uncontrollable token."})]}),(0,s.jsx)("p",{className:"my-4",children:"Furthermore, rules surrounding brackets are tricky and this generator is not smart enough to escape them automatically; corpora containing brackets or parentheses must be edited manually."}),(0,s.jsx)("p",{className:"my-4",children:"Applying these rules (and assuming no errors), we can generate the following parsed corpus:"}),(0,s.jsx)(l.default,{language:"c",children:i}),(0,s.jsx)("p",{className:"my-4",children:"where the commented tokens are free slots to put any C code you want to run."}),(0,s.jsxs)("p",{className:"mt-4 mb-3",children:["Then, we can map these tokens to ",(0,s.jsx)(o,{children:"#define"})," macros to generate the final C program (replace defines with ",(0,s.jsx)(o,{children:"// free"})," comments with your C code):"]}),(0,s.jsx)(l.default,{language:"c",children:n+"\n\n"+e})]}),(0,s.jsxs)("div",{className:"xl:w-[26rem] flex-none xl:sticky top-8 h-max",children:[(0,s.jsx)("h5",{className:"text-secondary text-sm mb-1",children:"Corpus"}),(0,s.jsx)(r.A,{value:e,onChange:e=>t(e.target.value),className:"text-sm rounded px-6 py-4 h-24 dark:bg-[#2b2b2b] mb-2 w-full border border-gray-400/50 dark:border-gray-100/10 placeholder:text-gray-400 placeholder:dark:text-gray-100/40"}),g.length>0&&(0,s.jsx)("ol",{className:"bg-black/20 rounded pr-6 pl-10 py-3 text-red-500 text-sm list-outside list-decimal",children:g.map(e=>(0,s.jsx)("li",{children:e},e))})]})]})}function d(e){return(0,s.jsx)("div",{className:"rounded-lg overflow-hidden text-sm [&>pre]:!py-3 mt-1",children:(0,s.jsx)(i.A,{language:"c",children:e.children})})}let h=["~","!"],u=["-","+","*","/","%","&","|","^",">","<"],m=[",",".","'",'"',"?",":","[","]","(",")"].concat(h,u);function p(e){return m.includes(e)||!isNaN(Number(e))}let x="A cantilever is a rigid structural element that extends horizontally and is\nunsupported at one end. Typically it extends from a flat vertical surface such\nas a wall, to which it must be firmly attached. Like other structural elements,\na cantilever can be formed as a beam, plate, truss, or slab.\n\nCantilever construction allows overhanging structures without additional support.\n\nSee also\n- Applied mechanics\n- Cantilever bicycle brakes\n- Cantilever bicycle frame\n- Cantilever chair\n- Cantilever method\n- Cantilevered stairs\n- Corbel arch\n- Euler-Bernoulli beam theory\n- Grand Canyon Skywalk\n- Knudsen force in the context of microcantilevers\n- Orthodontics\n- Statics"}},e=>{var t=t=>e(e.s=t);e.O(0,[325,441,684,358],()=>t(86853)),_N_E=e.O()}]);
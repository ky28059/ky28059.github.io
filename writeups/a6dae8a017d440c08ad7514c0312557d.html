<!DOCTYPE html><!--1ah2kfoWFtE0pggCB8LRj--><html class="dark scroll-smooth jetbrains_mono_cc80ae23-module__2tkX8G__variable"><head><meta charSet="utf-8"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/70bc3e132a0a741e-s.p.15008bfb.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/83afe278b6a6bb3c-s.p.3a6ba036.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="https://gist.github.com/assets/60120929/5bbb480a-7174-45fe-b0c9-261e521f8e5a" as="image"/><link rel="stylesheet" href="/_next/static/chunks/5ff2844ed613b929.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/f94e73be74b0c78c.js"/><script src="/_next/static/chunks/83314926b1bb0150.js" async=""></script><script src="/_next/static/chunks/caceb1adb687099b.js" async=""></script><script src="/_next/static/chunks/fbc8738301a445a5.js" async=""></script><script src="/_next/static/chunks/turbopack-f324ea70d879aed9.js" async=""></script><script src="/_next/static/chunks/ff1a16fafef87110.js" async=""></script><script src="/_next/static/chunks/b71c1cfea9076b4b.js" async=""></script><script src="/_next/static/chunks/b9afcb09c56609a6.js" async=""></script><script src="/_next/static/chunks/59d5dd52dd9fcb16.js" async=""></script><script src="/_next/static/chunks/0eb309e820c00a6d.js" async=""></script><script src="/_next/static/chunks/116d3b69f07f8eb7.js" async=""></script><script src="/_next/static/chunks/39b99946d2be6a43.js" async=""></script><meta name="next-size-adjust" content=""/><title>iCTF 2023 — Mystical Castle | kevin.fish</title><meta name="description" content="In the mystical realm of Eldoria, a land shrouded in legends and whispered secrets, there lived a young adventurer named Alex. With a heart full of curiosity and a spirit as wild as the wind, Alex had always been drawn to the tales of old, the kind that grandparents would recount by the flickering fireside on starless nights. Among these tales, one stood out - the story of the ancient Castle of Shadows, a place where time seemed to stand still, and where every corridor and chamber held a secret waiting to be uncovered."/><meta property="og:title" content="iCTF 2023 — Mystical Castle"/><meta property="og:description" content="In the mystical realm of Eldoria, a land shrouded in legends and whispered secrets, there lived a young adventurer named Alex. With a heart full of curiosity and a spirit as wild as the wind, Alex had always been drawn to the tales of old, the kind that grandparents would recount by the flickering fireside on starless nights. Among these tales, one stood out - the story of the ancient Castle of Shadows, a place where time seemed to stand still, and where every corridor and chamber held a secret waiting to be uncovered."/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="iCTF 2023 — Mystical Castle"/><meta name="twitter:description" content="In the mystical realm of Eldoria, a land shrouded in legends and whispered secrets, there lived a young adventurer named Alex. With a heart full of curiosity and a spirit as wild as the wind, Alex had always been drawn to the tales of old, the kind that grandparents would recount by the flickering fireside on starless nights. Among these tales, one stood out - the story of the ancient Castle of Shadows, a place where time seemed to stand still, and where every corridor and chamber held a secret waiting to be uncovered."/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="text-dark dark:text-white dark:bg-midnight" style="font-family:&#x27;Inter&#x27;, &#x27;Inter Fallback&#x27;;font-style:normal"><div hidden=""><!--$--><!--/$--></div><main class="container pt-20 pb-24"><a class="text-secondary text-sm mb-10 -ml-5 block w-max" href="/writeups">← Back to writeups</a><div><main class="text-pretty max-w-5xl mx-auto text-sm [&amp;_h1]:text-5xl [&amp;_h1]:font-semibold [&amp;_h1]:mb-8 [&amp;_blockquote]:text-secondary [&amp;_blockquote]:space-y-3 [&amp;_blockquote]:border-l-4 [&amp;_blockquote]:border-secondary [&amp;_blockquote]:pl-5 [&amp;_blockquote]:mb-5 [&amp;&gt;_p]:my-4 [&amp;_img]:my-5 [&amp;_ul]:list-disc [&amp;_ul]:pl-6 [&amp;_ol]:list-decimal [&amp;_ol]:pl-6 [&amp;_img]:rounded [&amp;_li]:my-2"><h1>iCTF 2023 — Mystical Castle</h1>
<blockquote>
<p>In the mystical realm of Eldoria, a land shrouded in legends and whispered secrets, there lived a young adventurer named Alex. With a heart full of curiosity and a spirit as wild as the wind, Alex had always been drawn to the tales of old, the kind that grandparents would recount by the flickering fireside on starless nights. Among these tales, one stood out - the story of the ancient Castle of Shadows, a place where time seemed to stand still, and where every corridor and chamber held a secret waiting to be uncovered.</p>
<p>...</p>
<p>Find a way to reach The Forbidden Throne Room using two parts of the book discovered in the Whispering Gallery, namely &#x27;castle_domain.pddl&#x27; and &#x27;castle_problem_poem.pddl&#x27;.</p>
<p>Once you found a plan to escape the castle, your flag content is the first two letters of each room visited in order.</p>
</blockquote>
<p>We&#x27;re given two <a href="https://en.wikipedia.org/wiki/Planning_Domain_Definition_Language"><code class="font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]">.pddl</code> files</a>:</p>
<div class="border border-white/10 rounded-lg my-2"><p class="font-jetbrains flex items-center text-xs rounded-t-lg px-3 py-0.5 text-secondary">Code<!-- --> (pddl)<button class="ml-auto hover:underline">(copy)</button></p><div class="rounded-b-lg overflow-hidden text-xs"><pre class="prismjs"><code style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">1</span><span class="">(define (domain castle_escape)
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">2</span>    (:requirements :strips :typing :negative-preconditions)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">3</span>    (:types
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">4</span>        room
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">5</span>        key
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">6</span>    )
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">7</span>    (:predicates
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">8</span>        (at ?r - room)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">9</span>        (opens_with ?r - room ?k1 - key ?k2 - key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">10</span>        (opened_with ?r - room ?k1 - key ?k2 - key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">11</span>        (has_key ?k - key ?r - room)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">12</span>        (got_key ?k - key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">13</span>        (blocks ?r1 - room ?r2 - room)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">14</span>        (blocked ?r - room)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">15</span>    )
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">16</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">17</span>    (:action move
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">18</span>        :parameters (?from - room ?to - room ?bl - room ?k1 - key ?k2 - key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">19</span>        :precondition (and (at ?from) (not (blocked ?to))
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">20</span>                           (opens_with ?to ?k1 ?k2) (got_key ?k1) (got_key ?k2) (blocks ?to ?bl))
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">21</span>        :effect (and (blocked ?bl) (not (at ?from)) (at ?to) (opened_with ?to ?k1 ?k2)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">22</span>        )
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">23</span>    )
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">24</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">25</span>    (:action pickup_key
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">26</span>        :parameters (?r - room ?k - key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">27</span>        :precondition (and (at ?r) (has_key ?k ?r))
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">28</span>        :effect (got_key ?k)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">29</span>    )
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">30</span>)</code></pre></div></div>
<div class="border border-white/10 rounded-lg my-2"><p class="font-jetbrains flex items-center text-xs rounded-t-lg px-3 py-0.5 text-secondary">Code<!-- --> (pddl)<button class="ml-auto hover:underline">(copy)</button></p><div class="rounded-b-lg overflow-hidden text-xs"><pre class="prismjs"><code style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">1</span><span class="">(define (problem castle_escape_problem)
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">2</span>    (:domain castle_escape)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">3</span>    (:objects
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">4</span>        whispering_gallery enchanted_hall mirror_chamber dragon_lair wizards_study
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">5</span>        moonlit_grove shadowy_vault sunken_crypt frozen_cell phantom_corridor
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">6</span>        serpents_nest knights_hall golden_sanctum crystal_cove mystic_garden
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">7</span>        starlit_tower silent_tomb echoing_cavern haunted_chamber forbidden_throne - room
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">8</span>        sapphire_key ruby_key emerald_key diamond_key amethyst_key
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">9</span>        topaz_key opal_key pearl_key garnet_key onyx_key
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">10</span>        moonstone_key sunstone_key quartz_key turquoise_key jade_key
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">11</span>        obsidian_key amber_key citrine_key lapis_key agate_key - key
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">12</span>    )
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">13</span>    (:init
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">14</span>        ;at
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">15</span>        In Whispering Gallery begins our tale,
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">16</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">17</span>        ;opens_with
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">18</span>        Atop a vault of shadows, silent, steep, topaz, pearl keys awake its sleep.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">19</span>        Crypt sunken &#x27;neath the time&#x27;s decree, opal, garnet turn the key.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">20</span>        Cell of frostbound, age-old hex, yields to pearl and onyx&#x27;s behest.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">21</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">22</span>        (opens_with phantom_corridor garnet_key moonstone_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">23</span>        (opens_with enchanted_hall sapphire_key emerald_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">24</span>        (opens_with mirror_chamber ruby_key diamond_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">25</span>        (opens_with dragon_lair emerald_key amethyst_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">26</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">27</span>        Bow of Wizard&#x27;s study, knowledge bound, diamond, topaz keys unwound.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">28</span>        Grove beneath the moonlit sky, amethyst, opal the secrets ply.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">29</span>        Knight&#x27;s great hall, strong and tall, with moonstone, quartz, its gates do fall.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">30</span>        Golden sanctum&#x27;s hidden trust, unveiled by sunstone, turquoise&#x27;s thrust.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">31</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">32</span>        (opens_with crystal_cove quartz_key jade_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">33</span>        (opens_with mystic_garden turquoise_key obsidian_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">34</span>        (opens_with starlit_tower jade_key amber_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">35</span>        (opens_with echoing_cavern amber_key lapis_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">36</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">37</span>        Haunted chamber&#x27;s secrets deep, citrine, agate open keep.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">38</span>        Throne&#x27;s domain, regal, vast, lapis, agate keys hold fast.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">39</span>        Serpents&#x27; nest, coils tight, onyx, sunstone keys ignite.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">40</span>        Silent tomb, whispers cease, obsidian, citrine keys release.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">41</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">42</span>        ;has_key
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">43</span>        In the gallery that whispers, sapphire key does rest,
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">44</span>        With emerald key beside, in the very same nest.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">45</span>        Ruby key in enchanted hall does dwell,
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">46</span>        Sunstone key in the corridor where phantoms tell.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">47</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">48</span>        (has_key quartz_key serpents_nest)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">49</span>        (has_key opal_key wizards_study)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">50</span>        (has_key pearl_key moonlit_grove)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">51</span>        (has_key garnet_key shadowy_vault)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">52</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">53</span>        Onyx key in the crypt, sunken and deep,
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">54</span>        Moonstone key in the frozen cell&#x27;s keep.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">55</span>        Jade key in the hall where knights do parade,
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">56</span>        Obsidian key in the crystal cove&#x27;s shade.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">57</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">58</span>        (has_key amber_key mystic_garden)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">59</span>        (has_key citrine_key starlit_tower)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">60</span>        (has_key lapis_key silent_tomb)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">61</span>        (has_key agate_key echoing_cavern)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">62</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">63</span>        (has_key turquoise_key knights_hall)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">64</span>        (has_key diamond_key enchanted_hall)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">65</span>        (has_key diamond_key mirror_chamber)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">66</span>        (has_key amethyst_key mirror_chamber)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">67</span>        (has_key topaz_key mirror_chamber)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">68</span>        (has_key topaz_key wizards_study)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">69</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">70</span>        ;blocks
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">71</span>        In verse, the castle&#x27;s blockades we now state,
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">72</span>        Each line a path, each path a fate.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">73</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">74</span>        Wizards&#x27; study blocks the mirror&#x27;s gleam,
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">75</span>        Moonlit grove blocks the enchanted hall&#x27;s dream.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">76</span>        Mystic garden blocks the moonlit grove,
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">77</span>        Starlit tower blocks the crypt below.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">78</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">79</span>        (blocks silent_tomb shadowy_vault)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">80</span>        (blocks echoing_cavern moonlit_grove)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">81</span>        (blocks haunted_chamber wizards_study)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">82</span>        (blocks forbidden_throne whispering_gallery)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">83</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">84</span>        Whispering gallery, enchanted hall blocks,
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">85</span>        Enchanted hall, whispering gallery locks.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">86</span>        Mirror chamber, enchanted hall&#x27;s gate,
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">87</span>        Dragon lair, whispering gallery&#x27;s fate.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">88</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">89</span>        (blocks knights_hall serpents_nest)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">90</span>        (blocks crystal_cove serpents_nest)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">91</span>        (blocks shadowy_vault wizards_study)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">92</span>        (blocks sunken_crypt enchanted_hall)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">93</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">94</span>        Frozen cell blocks the dragon&#x27;s lair,
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">95</span>        Phantom corridor, shadowy vault&#x27;s snare.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">96</span>        Serpents&#x27; nest blocks the moonlit grove,
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">97</span>        Golden sanctum, moonlit grove&#x27;s trove.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">98</span>    )
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">99</span>    ;goal
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">100</span>    And so the goal, clear and true,
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">101</span>    To reach the throne, forbidden view
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">102</span>    And claim the crown, the kingdom&#x27;s due.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">103</span>)</code></pre></div></div>
<p>The first file contains predefined type and function definitions for our program. The second file contains the description of the castle
escape &quot;problem&quot;, but with some function calls substituted out for poetic verses about what the function calls <em>should</em> do.</p>
<p>With some hints from the comments, our task seems to be to translate each line into its corresponding <code class="font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]">pddl</code> syntax to complete the program and
solve the puzzle.</p>
<blockquote>
<p>;at</p>
<p>In Whispering Gallery begins our tale,</p>
</blockquote>
<div class="border border-white/10 rounded-lg my-2"><p class="font-jetbrains flex items-center text-xs rounded-t-lg px-3 py-0.5 text-secondary">Code<!-- --> (pddl)<button class="ml-auto hover:underline">(copy)</button></p><div class="rounded-b-lg overflow-hidden text-xs"><pre class="prismjs"><code style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">1</span><span class="">(at whispering_gallery)</span></code></pre></div></div>
<blockquote>
<p>;opens_with</p>
<p>Atop a vault of shadows, silent, steep, topaz, pearl keys awake its sleep.</p>
</blockquote>
<div class="border border-white/10 rounded-lg my-2"><p class="font-jetbrains flex items-center text-xs rounded-t-lg px-3 py-0.5 text-secondary">Code<!-- --> (pddl)<button class="ml-auto hover:underline">(copy)</button></p><div class="rounded-b-lg overflow-hidden text-xs"><pre class="prismjs"><code style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">1</span><span class="">(opens_with shadowy_vault topaz_key pearl_key)</span></code></pre></div></div>
<p>Looking at the definition in the first <code class="font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]">pddl</code> file, the <code class="font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]">opens_with</code> function takes in a location and the two keys that open it.</p>
<blockquote>
<p>Crypt sunken &#x27;neath the time&#x27;s decree, opal, garnet turn the key.</p>
</blockquote>
<div class="border border-white/10 rounded-lg my-2"><p class="font-jetbrains flex items-center text-xs rounded-t-lg px-3 py-0.5 text-secondary">Code<!-- --> (pddl)<button class="ml-auto hover:underline">(copy)</button></p><div class="rounded-b-lg overflow-hidden text-xs"><pre class="prismjs"><code style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">1</span><span class="">(opens_with sunken_crypt opal_key garnet_key)</span></code></pre></div></div>
<blockquote>
<p>Cell of frostbound, age-old hex, yields to pearl and onyx&#x27;s behest.</p>
</blockquote>
<div class="border border-white/10 rounded-lg my-2"><p class="font-jetbrains flex items-center text-xs rounded-t-lg px-3 py-0.5 text-secondary">Code<!-- --> (pddl)<button class="ml-auto hover:underline">(copy)</button></p><div class="rounded-b-lg overflow-hidden text-xs"><pre class="prismjs"><code style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">1</span><span class="">(opens_with frozen_cell pearl_key onyx_key)</span></code></pre></div></div>
<blockquote>
<p>Bow of Wizard&#x27;s study, knowledge bound, diamond, topaz keys unwound.</p>
<p>Grove beneath the moonlit sky, amethyst, opal the secrets ply.</p>
<p>Knight&#x27;s great hall, strong and tall, with moonstone, quartz, its gates do fall.</p>
<p>Golden sanctum&#x27;s hidden trust, unveiled by sunstone, turquoise&#x27;s thrust.</p>
</blockquote>
<div class="border border-white/10 rounded-lg my-2"><p class="font-jetbrains flex items-center text-xs rounded-t-lg px-3 py-0.5 text-secondary">Code<!-- --> (pddl)<button class="ml-auto hover:underline">(copy)</button></p><div class="rounded-b-lg overflow-hidden text-xs"><pre class="prismjs"><code style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">1</span><span class="">(opens_with wizards_study diamond_key topaz_key)
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">2</span>(opens_with moonlit_grove amethyst_key opal_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">3</span>(opens_with knights_hall moonstone_key quartz_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">4</span>(opens_with golden_sanctum sunstone_key turquoise_key)</code></pre></div></div>
<blockquote>
<p>Haunted chamber&#x27;s secrets deep, citrine, agate open keep.</p>
<p>Throne&#x27;s domain, regal, vast, lapis, agate keys hold fast.</p>
<p>Serpents&#x27; nest, coils tight, onyx, sunstone keys ignite.</p>
<p>Silent tomb, whispers cease, obsidian, citrine keys release.</p>
</blockquote>
<div class="border border-white/10 rounded-lg my-2"><p class="font-jetbrains flex items-center text-xs rounded-t-lg px-3 py-0.5 text-secondary">Code<!-- --> (pddl)<button class="ml-auto hover:underline">(copy)</button></p><div class="rounded-b-lg overflow-hidden text-xs"><pre class="prismjs"><code style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">1</span><span class="">(opens_with haunted_chamber citrine_key agate_key)
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">2</span>(opens_with forbidden_throne lapis_key agate_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">3</span>(opens_with serpents_nest onyx_key sunstone_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">4</span>(opens_with silent_tomb obsidian_key citrine_key)</code></pre></div></div>
<blockquote>
<p>;has_key</p>
<p>In the gallery that whispers, sapphire key does rest,</p>
<p>With emerald key beside, in the very same nest.</p>
<p>Ruby key in enchanted hall does dwell,</p>
<p>Sunstone key in the corridor where phantoms tell.</p>
</blockquote>
<div class="border border-white/10 rounded-lg my-2"><p class="font-jetbrains flex items-center text-xs rounded-t-lg px-3 py-0.5 text-secondary">Code<!-- --> (pddl)<button class="ml-auto hover:underline">(copy)</button></p><div class="rounded-b-lg overflow-hidden text-xs"><pre class="prismjs"><code style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">1</span><span class="">(has_key sapphire_key whispering_gallery)
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">2</span>(has_key emerald_key whispering_gallery) ; serpents nest?
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">3</span>(has_key ruby_key enchanted_hall)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">4</span>(has_key sunstone_key phantom_corridor)</code></pre></div></div>
<p>The <code class="font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]">has_key</code> function takes in the key as its first argument and the key&#x27;s location as its second. (The second line was a bit uncertain
because it used the word &quot;nest&quot;, but &quot;very same&quot; implied that it was referring to the same location as the previous instruction.)</p>
<blockquote>
<p>Onyx key in the crypt, sunken and deep,</p>
<p>Moonstone key in the frozen cell&#x27;s keep.</p>
<p>Jade key in the hall where knights do parade,</p>
<p>Obsidian key in the crystal cove&#x27;s shade.</p>
</blockquote>
<div class="border border-white/10 rounded-lg my-2"><p class="font-jetbrains flex items-center text-xs rounded-t-lg px-3 py-0.5 text-secondary">Code<!-- --> (pddl)<button class="ml-auto hover:underline">(copy)</button></p><div class="rounded-b-lg overflow-hidden text-xs"><pre class="prismjs"><code style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">1</span><span class="">(has_key onyx_key sunken_crypt)
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">2</span>(has_key moonstone_key frozen_cell)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">3</span>(has_key jade_key knights_hall)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">4</span>(has_key obsidian_key crystal_cove)</code></pre></div></div>
<blockquote>
<p>;blocks</p>
<p>In verse, the castle&#x27;s blockades we now state,</p>
<p>Each line a path, each path a fate.</p>
</blockquote>
<p>The <code class="font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]">blocks</code> function is a little less clear, because the definition only tells us that it takes two rooms and not necessarily
which argument corresponds to which. However, assuming that the objects in each line are given in the order they need to be passed
to the function (as was true for <code class="font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]">has_key</code> and <code class="font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]">opens_with</code> earlier),</p>
<blockquote>
<p>Wizards&#x27; study blocks the mirror&#x27;s gleam,</p>
<p>Moonlit grove blocks the enchanted hall&#x27;s dream.</p>
<p>Mystic garden blocks the moonlit grove,</p>
<p>Starlit tower blocks the crypt below.</p>
</blockquote>
<div class="border border-white/10 rounded-lg my-2"><p class="font-jetbrains flex items-center text-xs rounded-t-lg px-3 py-0.5 text-secondary">Code<!-- --> (pddl)<button class="ml-auto hover:underline">(copy)</button></p><div class="rounded-b-lg overflow-hidden text-xs"><pre class="prismjs"><code style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">1</span><span class="">(blocks wizards_study mirror_chamber)
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">2</span>(blocks moonlit_grove enchanted_hall)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">3</span>(blocks mystic_garden moonlit_grove)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">4</span>(blocks starlit_tower sunken_crypt)</code></pre></div></div>
<blockquote>
<p>Whispering gallery, enchanted hall blocks,</p>
<p>Enchanted hall, whispering gallery locks.</p>
<p>Mirror chamber, enchanted hall&#x27;s gate,</p>
<p>Dragon lair, whispering gallery&#x27;s fate.</p>
</blockquote>
<div class="border border-white/10 rounded-lg my-2"><p class="font-jetbrains flex items-center text-xs rounded-t-lg px-3 py-0.5 text-secondary">Code<!-- --> (pddl)<button class="ml-auto hover:underline">(copy)</button></p><div class="rounded-b-lg overflow-hidden text-xs"><pre class="prismjs"><code style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">1</span><span class="">(blocks enchanted_hall whispering_gallery)
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">2</span>(blocks whispering_gallery enchanted_hall)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">3</span>(blocks mirror_chamber enchanted_hall)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">4</span>(blocks dragon_lair whispering_gallery)</code></pre></div></div>
<p>Now it gets complicated, because the sentence structure gets reversed here. Assuming that the function <code class="font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]">(blocks a b)</code> corresponds to the
sentence <code class="font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]">a blocks b</code>, the sentence <code class="font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]">c, d blocks</code> = <code class="font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]">d blocks c</code> must correspond to <code class="font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]">(blocks d c)</code>.</p>
<blockquote>
<p>Frozen cell blocks the dragon&#x27;s lair,</p>
<p>Phantom corridor, shadowy vault&#x27;s snare.</p>
<p>Serpents&#x27; nest blocks the moonlit grove,</p>
<p>Golden sanctum, moonlit grove&#x27;s trove.</p>
</blockquote>
<div class="border border-white/10 rounded-lg my-2"><p class="font-jetbrains flex items-center text-xs rounded-t-lg px-3 py-0.5 text-secondary">Code<!-- --> (pddl)<button class="ml-auto hover:underline">(copy)</button></p><div class="rounded-b-lg overflow-hidden text-xs"><pre class="prismjs"><code style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">1</span><span class="">(blocks frozen_cell dragon_lair)
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">2</span>(blocks phantom_corridor shadowy_vault)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">3</span>(blocks serpents_nest moonlit_grove)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">4</span>(blocks moonlit_grove golden_sanctum)</code></pre></div></div>
<p>Now they alternate between the regular and flipped sentence structure every line.</p>
<p>Finally, putting in the goal,</p>
<blockquote>
<p>;goal</p>
<p>And so the goal, clear and true,</p>
<p>To reach the throne, forbidden view</p>
<p>And claim the crown, the kingdom&#x27;s due.</p>
</blockquote>
<div class="border border-white/10 rounded-lg my-2"><p class="font-jetbrains flex items-center text-xs rounded-t-lg px-3 py-0.5 text-secondary">Code<!-- --> (pddl)<button class="ml-auto hover:underline">(copy)</button></p><div class="rounded-b-lg overflow-hidden text-xs"><pre class="prismjs"><code style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">1</span><span class="">(:goal (and
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">2</span>    (at forbidden_throne)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">3</span>    ; (has crown)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">4</span>))</code></pre></div></div>
<p>(the crown was not defined as an object, so our goal is simply to reach the forbidden throne, despite the other lines in the comment.)</p>
<p>Now that we have a completed <code class="font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]">pddl</code> file, we can run it through the solver mentioned in the challenge description to get this path
as a result:</p>
<img width="898" alt="image" src="https://gist.github.com/assets/60120929/5bbb480a-7174-45fe-b0c9-261e521f8e5a"/>
<p>Looking at every room we enter via the <code class="font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]">move</code> command (and remembering that we start in the whispering gallery!), our flag is</p>
<div class="border border-white/10 rounded-lg my-2"><p class="font-jetbrains flex items-center text-xs rounded-t-lg px-3 py-0.5 text-secondary">Code<button class="ml-auto hover:underline">(copy)</button></p><div class="rounded-b-lg overflow-hidden text-xs"><pre class="prismjs"><code style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">1</span><span class="">ictf{whenmiwimoshsufrphsekncrmystsiecfo}</span></code></pre></div></div>
<p>The final <code class="font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]">pddl</code> file should look like</p>
<div class="border border-white/10 rounded-lg my-2"><p class="font-jetbrains flex items-center text-xs rounded-t-lg px-3 py-0.5 text-secondary">Code<!-- --> (pddl)<button class="ml-auto hover:underline">(copy)</button></p><div class="rounded-b-lg overflow-hidden text-xs"><pre class="prismjs"><code style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">1</span><span class="">(define (problem castle_escape_problem)
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">2</span>    (:domain castle_escape)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">3</span>    (:objects
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">4</span>        whispering_gallery enchanted_hall mirror_chamber dragon_lair wizards_study
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">5</span>        moonlit_grove shadowy_vault sunken_crypt frozen_cell phantom_corridor
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">6</span>        serpents_nest knights_hall golden_sanctum crystal_cove mystic_garden
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">7</span>        starlit_tower silent_tomb echoing_cavern haunted_chamber forbidden_throne - room
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">8</span>        sapphire_key ruby_key emerald_key diamond_key amethyst_key
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">9</span>        topaz_key opal_key pearl_key garnet_key onyx_key
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">10</span>        moonstone_key sunstone_key quartz_key turquoise_key jade_key
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">11</span>        obsidian_key amber_key citrine_key lapis_key agate_key - key
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">12</span>    )
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">13</span>    (:init
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">14</span>        ;at
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">15</span>        (at whispering_gallery)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">16</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">17</span>        ;opens_with
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">18</span>        (opens_with shadowy_vault topaz_key pearl_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">19</span>        (opens_with sunken_crypt opal_key garnet_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">20</span>        (opens_with frozen_cell pearl_key onyx_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">21</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">22</span>        (opens_with phantom_corridor garnet_key moonstone_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">23</span>        (opens_with enchanted_hall sapphire_key emerald_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">24</span>        (opens_with mirror_chamber ruby_key diamond_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">25</span>        (opens_with dragon_lair emerald_key amethyst_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">26</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">27</span>        (opens_with wizards_study diamond_key topaz_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">28</span>        (opens_with moonlit_grove amethyst_key opal_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">29</span>        (opens_with knights_hall moonstone_key quartz_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">30</span>        (opens_with golden_sanctum sunstone_key turquoise_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">31</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">32</span>        (opens_with crystal_cove quartz_key jade_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">33</span>        (opens_with mystic_garden turquoise_key obsidian_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">34</span>        (opens_with starlit_tower jade_key amber_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">35</span>        (opens_with echoing_cavern amber_key lapis_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">36</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">37</span>        (opens_with haunted_chamber citrine_key agate_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">38</span>        (opens_with forbidden_throne lapis_key agate_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">39</span>        (opens_with serpents_nest onyx_key sunstone_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">40</span>        (opens_with silent_tomb obsidian_key citrine_key)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">41</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">42</span>        ;has_key
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">43</span>        (has_key sapphire_key whispering_gallery)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">44</span>        (has_key emerald_key whispering_gallery) ; serpents nest?
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">45</span>        (has_key ruby_key enchanted_hall)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">46</span>        (has_key sunstone_key phantom_corridor)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">47</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">48</span>        (has_key quartz_key serpents_nest)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">49</span>        (has_key opal_key wizards_study)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">50</span>        (has_key pearl_key moonlit_grove)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">51</span>        (has_key garnet_key shadowy_vault)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">52</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">53</span>        (has_key onyx_key sunken_crypt)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">54</span>        (has_key moonstone_key frozen_cell)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">55</span>        (has_key jade_key knights_hall)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">56</span>        (has_key obsidian_key crystal_cove)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">57</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">58</span>        (has_key amber_key mystic_garden)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">59</span>        (has_key citrine_key starlit_tower)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">60</span>        (has_key lapis_key silent_tomb)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">61</span>        (has_key agate_key echoing_cavern)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">62</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">63</span>        (has_key turquoise_key knights_hall)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">64</span>        (has_key diamond_key enchanted_hall)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">65</span>        (has_key diamond_key mirror_chamber)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">66</span>        (has_key amethyst_key mirror_chamber)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">67</span>        (has_key topaz_key mirror_chamber)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">68</span>        (has_key topaz_key wizards_study)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">69</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">70</span>        ;blocks
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">71</span>        ; In verse, the castle&#x27;s blockades we now state,
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">72</span>        ; Each line a path, each path a fate.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">73</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">74</span>        (blocks wizards_study mirror_chamber)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">75</span>        (blocks moonlit_grove enchanted_hall)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">76</span>        (blocks mystic_garden moonlit_grove)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">77</span>        (blocks starlit_tower sunken_crypt)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">78</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">79</span>        (blocks silent_tomb shadowy_vault)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">80</span>        (blocks echoing_cavern moonlit_grove)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">81</span>        (blocks haunted_chamber wizards_study)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">82</span>        (blocks forbidden_throne whispering_gallery)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">83</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">84</span>        (blocks enchanted_hall whispering_gallery)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">85</span>        (blocks whispering_gallery enchanted_hall)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">86</span>        (blocks mirror_chamber enchanted_hall)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">87</span>        (blocks dragon_lair whispering_gallery)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">88</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">89</span>        (blocks knights_hall serpents_nest)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">90</span>        (blocks crystal_cove serpents_nest)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">91</span>        (blocks shadowy_vault wizards_study)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">92</span>        (blocks sunken_crypt enchanted_hall)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">93</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">94</span>        (blocks frozen_cell dragon_lair)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">95</span>        (blocks phantom_corridor shadowy_vault)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">96</span>        (blocks serpents_nest moonlit_grove)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">97</span>        (blocks moonlit_grove golden_sanctum)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">98</span>    )
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">99</span>    ;goal
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">100</span>    (:goal (and
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">101</span>        (at forbidden_throne)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">102</span>        ; (has crown)
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">103</span>    ))
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">104</span>    ; And so the goal, clear and true,
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">105</span>    ; To reach the throne, forbidden view
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">106</span>    ; And claim the crown, the kingdom&#x27;s due.
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">107</span>)</code></pre></div></div></main></div><!--$--><!--/$--></main><script src="/_next/static/chunks/f94e73be74b0c78c.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[39756,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/b71c1cfea9076b4b.js\"],\"default\"]\n3:I[37457,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/b71c1cfea9076b4b.js\"],\"default\"]\n4:I[22016,[\"/_next/static/chunks/b9afcb09c56609a6.js\"],\"\"]\n6:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/b71c1cfea9076b4b.js\"],\"OutletBoundary\"]\n7:\"$Sreact.suspense\"\n9:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/b71c1cfea9076b4b.js\"],\"ViewportBoundary\"]\nb:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/b71c1cfea9076b4b.js\"],\"MetadataBoundary\"]\nd:I[68027,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/b71c1cfea9076b4b.js\"],\"default\"]\n:HL[\"/_next/static/chunks/5ff2844ed613b929.css\",\"style\"]\n:HL[\"/_next/static/media/70bc3e132a0a741e-s.p.15008bfb.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/83afe278b6a6bb3c-s.p.3a6ba036.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"1ah2kfoWFtE0pggCB8LRj\",\"c\":[\"\",\"writeups\",\"a6dae8a017d440c08ad7514c0312557d\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"writeups\",{\"children\":[[\"id\",\"a6dae8a017d440c08ad7514c0312557d\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/5ff2844ed613b929.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"className\":\"dark scroll-smooth jetbrains_mono_cc80ae23-module__2tkX8G__variable\",\"children\":[[\"$\",\"head\",null,{\"children\":[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}]}],[\"$\",\"body\",null,{\"className\":\"text-dark dark:text-white dark:bg-midnight\",\"style\":{\"fontFamily\":\"'Inter', 'Inter Fallback'\",\"fontStyle\":\"normal\"},\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"div\",null,{\"className\":\"h-screen flex items-center justify-center\",\"children\":[\"$\",\"main\",null,{\"className\":\"relative pl-14\",\"children\":[[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 512 512\",\"className\":\"absolute left-0 top-2 text-5xl text-grapefruit\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M256 48C140.559 48 48 140.559 48 256c0 115.436 92.559 208 208 208 115.435 0 208-92.564 208-208 0-115.441-92.564-208-208-208zm104.002 282.881l-29.12 29.117L256 285.117l-74.881 74.881-29.121-29.117L226.881 256l-74.883-74.881 29.121-29.116L256 226.881l74.881-74.878 29.12 29.116L285.119 256l74.883 74.881z\",\"children\":[]}]]],\"style\":{\"color\":\"$undefined\"},\"height\":\"1em\",\"width\":\"1em\",\"xmlns\":\"http://www.w3.org/2000/svg\"}],[\"$\",\"h1\",null,{\"className\":\"font-bold text-7xl underline decoration-grapefruit mb-5\",\"children\":\"404.\"}],[\"$\",\"p\",null,{\"children\":\"Your requested page was not found.\"}],[\"$\",\"$L4\",null,{\"href\":\"/\",\"className\":\"font-medium text-inherit\",\"children\":\"Return to home →\"}]]}]}],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"main\",null,{\"className\":\"container pt-20 pb-24\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/b9afcb09c56609a6.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[[\"$\",\"$L4\",null,{\"href\":\"/writeups\",\"className\":\"text-secondary text-sm mb-10 -ml-5 block w-max\",\"children\":\"← Back to writeups\"}],[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/59d5dd52dd9fcb16.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/0eb309e820c00a6d.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-2\",{\"src\":\"/_next/static/chunks/116d3b69f07f8eb7.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-3\",{\"src\":\"/_next/static/chunks/39b99946d2be6a43.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"$L6\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@8\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L9\",null,{\"children\":\"$@a\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@c\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",[]],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"e:I[10453,[\"/_next/static/chunks/b9afcb09c56609a6.js\",\"/_next/static/chunks/59d5dd52dd9fcb16.js\",\"/_next/static/chunks/0eb309e820c00a6d.js\",\"/_next/static/chunks/116d3b69f07f8eb7.js\",\"/_next/static/chunks/39b99946d2be6a43.js\"],\"default\"]\nf:T10df,"])</script><script>self.__next_f.push([1,"(define (problem castle_escape_problem)\n    (:domain castle_escape)\n    (:objects\n        whispering_gallery enchanted_hall mirror_chamber dragon_lair wizards_study\n        moonlit_grove shadowy_vault sunken_crypt frozen_cell phantom_corridor\n        serpents_nest knights_hall golden_sanctum crystal_cove mystic_garden\n        starlit_tower silent_tomb echoing_cavern haunted_chamber forbidden_throne - room\n        sapphire_key ruby_key emerald_key diamond_key amethyst_key\n        topaz_key opal_key pearl_key garnet_key onyx_key\n        moonstone_key sunstone_key quartz_key turquoise_key jade_key\n        obsidian_key amber_key citrine_key lapis_key agate_key - key\n    )\n    (:init\n        ;at\n        In Whispering Gallery begins our tale,\n\n        ;opens_with\n        Atop a vault of shadows, silent, steep, topaz, pearl keys awake its sleep.\n        Crypt sunken 'neath the time's decree, opal, garnet turn the key.\n        Cell of frostbound, age-old hex, yields to pearl and onyx's behest.\n\n        (opens_with phantom_corridor garnet_key moonstone_key)\n        (opens_with enchanted_hall sapphire_key emerald_key)\n        (opens_with mirror_chamber ruby_key diamond_key)\n        (opens_with dragon_lair emerald_key amethyst_key)\n\n        Bow of Wizard's study, knowledge bound, diamond, topaz keys unwound.\n        Grove beneath the moonlit sky, amethyst, opal the secrets ply.\n        Knight's great hall, strong and tall, with moonstone, quartz, its gates do fall.\n        Golden sanctum's hidden trust, unveiled by sunstone, turquoise's thrust.\n\n        (opens_with crystal_cove quartz_key jade_key)\n        (opens_with mystic_garden turquoise_key obsidian_key)\n        (opens_with starlit_tower jade_key amber_key)\n        (opens_with echoing_cavern amber_key lapis_key)\n\n        Haunted chamber's secrets deep, citrine, agate open keep.\n        Throne's domain, regal, vast, lapis, agate keys hold fast.\n        Serpents' nest, coils tight, onyx, sunstone keys ignite.\n        Silent tomb, whispers cease, obsidian, citrine keys release.\n\n        ;has_key\n        In the gallery that whispers, sapphire key does rest,\n        With emerald key beside, in the very same nest.\n        Ruby key in enchanted hall does dwell,\n        Sunstone key in the corridor where phantoms tell.\n\n        (has_key quartz_key serpents_nest)\n        (has_key opal_key wizards_study)\n        (has_key pearl_key moonlit_grove)\n        (has_key garnet_key shadowy_vault)\n\n        Onyx key in the crypt, sunken and deep,\n        Moonstone key in the frozen cell's keep.\n        Jade key in the hall where knights do parade,\n        Obsidian key in the crystal cove's shade.\n\n        (has_key amber_key mystic_garden)\n        (has_key citrine_key starlit_tower)\n        (has_key lapis_key silent_tomb)\n        (has_key agate_key echoing_cavern)\n\n        (has_key turquoise_key knights_hall)\n        (has_key diamond_key enchanted_hall)\n        (has_key diamond_key mirror_chamber)\n        (has_key amethyst_key mirror_chamber)\n        (has_key topaz_key mirror_chamber)\n        (has_key topaz_key wizards_study)\n\n        ;blocks\n        In verse, the castle's blockades we now state,\n        Each line a path, each path a fate.\n\n        Wizards' study blocks the mirror's gleam,\n        Moonlit grove blocks the enchanted hall's dream.\n        Mystic garden blocks the moonlit grove,\n        Starlit tower blocks the crypt below.\n\n        (blocks silent_tomb shadowy_vault)\n        (blocks echoing_cavern moonlit_grove)\n        (blocks haunted_chamber wizards_study)\n        (blocks forbidden_throne whispering_gallery)\n\n        Whispering gallery, enchanted hall blocks,\n        Enchanted hall, whispering gallery locks.\n        Mirror chamber, enchanted hall's gate,\n        Dragon lair, whispering gallery's fate.\n\n        (blocks knights_hall serpents_nest)\n        (blocks crystal_cove serpents_nest)\n        (blocks shadowy_vault wizards_study)\n        (blocks sunken_crypt enchanted_hall)\n\n        Frozen cell blocks the dragon's lair,\n        Phantom corridor, shadowy vault's snare.\n        Serpents' nest blocks the moonlit grove,\n        Golden sanctum, moonlit grove's trove.\n    )\n    ;goal\n    And so the goal, clear and true,\n    To reach the throne, forbidden view\n    And claim the crown, the kingdom's due.\n)"])</script><script>self.__next_f.push([1,"5:[\"$\",\"div\",null,{\"children\":[\"$\",\"main\",null,{\"className\":\"text-pretty max-w-5xl mx-auto text-sm [\u0026_h1]:text-5xl [\u0026_h1]:font-semibold [\u0026_h1]:mb-8 [\u0026_blockquote]:text-secondary [\u0026_blockquote]:space-y-3 [\u0026_blockquote]:border-l-4 [\u0026_blockquote]:border-secondary [\u0026_blockquote]:pl-5 [\u0026_blockquote]:mb-5 [\u0026\u003e_p]:my-4 [\u0026_img]:my-5 [\u0026_ul]:list-disc [\u0026_ul]:pl-6 [\u0026_ol]:list-decimal [\u0026_ol]:pl-6 [\u0026_img]:rounded [\u0026_li]:my-2\",\"children\":[[\"$\",\"h1\",\"h1-0\",{\"children\":\"iCTF 2023 — Mystical Castle\"}],\"\\n\",[\"$\",\"blockquote\",\"blockquote-0\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":\"In the mystical realm of Eldoria, a land shrouded in legends and whispered secrets, there lived a young adventurer named Alex. With a heart full of curiosity and a spirit as wild as the wind, Alex had always been drawn to the tales of old, the kind that grandparents would recount by the flickering fireside on starless nights. Among these tales, one stood out - the story of the ancient Castle of Shadows, a place where time seemed to stand still, and where every corridor and chamber held a secret waiting to be uncovered.\"}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":\"...\"}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"children\":\"Find a way to reach The Forbidden Throne Room using two parts of the book discovered in the Whispering Gallery, namely 'castle_domain.pddl' and 'castle_problem_poem.pddl'.\"}],\"\\n\",[\"$\",\"p\",\"p-3\",{\"children\":\"Once you found a plan to escape the castle, your flag content is the first two letters of each room visited in order.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[\"We're given two \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://en.wikipedia.org/wiki/Planning_Domain_Definition_Language\",\"children\":[[\"$\",\"code\",\"code-0\",{\"className\":\"font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]\",\"children\":\".pddl\"}],\" files\"]}],\":\"]}],\"\\n\",[\"$\",\"$Le\",\"pre-0\",{\"className\":\"my-2\",\"children\":\"(define (domain castle_escape)\\n    (:requirements :strips :typing :negative-preconditions)\\n    (:types\\n        room\\n        key\\n    )\\n    (:predicates\\n        (at ?r - room)\\n        (opens_with ?r - room ?k1 - key ?k2 - key)\\n        (opened_with ?r - room ?k1 - key ?k2 - key)\\n        (has_key ?k - key ?r - room)\\n        (got_key ?k - key)\\n        (blocks ?r1 - room ?r2 - room)\\n        (blocked ?r - room)\\n    )\\n\\n    (:action move\\n        :parameters (?from - room ?to - room ?bl - room ?k1 - key ?k2 - key)\\n        :precondition (and (at ?from) (not (blocked ?to))\\n                           (opens_with ?to ?k1 ?k2) (got_key ?k1) (got_key ?k2) (blocks ?to ?bl))\\n        :effect (and (blocked ?bl) (not (at ?from)) (at ?to) (opened_with ?to ?k1 ?k2)\\n        )\\n    )\\n\\n    (:action pickup_key\\n        :parameters (?r - room ?k - key)\\n        :precondition (and (at ?r) (has_key ?k ?r))\\n        :effect (got_key ?k)\\n    )\\n)\",\"language\":\"pddl\"}],\"\\n\",[\"$\",\"$Le\",\"pre-1\",{\"className\":\"my-2\",\"children\":\"$f\",\"language\":\"pddl\"}],\"\\n\",\"$L10\",\"\\n\",\"$L11\",\"\\n\",\"$L12\",\"\\n\",\"$L13\",\"\\n\",\"$L14\",\"\\n\",\"$L15\",\"\\n\",\"$L16\",\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\",\"\\n\",\"$L1a\",\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\",\"\\n\",\"$L21\",\"\\n\",\"$L22\",\"\\n\",\"$L23\",\"\\n\",\"$L24\",\"\\n\",\"$L25\",\"\\n\",\"$L26\",\"\\n\",\"$L27\",\"\\n\",\"$L28\",\"\\n\",\"$L29\",\"\\n\",\"$L2a\",\"\\n\",\"$L2b\",\"\\n\",\"$L2c\",\"\\n\",\"$L2d\",\"\\n\",\"$L2e\",\"\\n\",\"$L2f\",\"\\n\",\"$L30\",\"\\n\",\"$L31\",\"\\n\",\"$L32\",\"\\n\",\"$L33\",\"\\n\",\"$L34\",\"\\n\",\"$L35\",\"\\n\",\"$L36\",\"\\n\",\"$L37\"]}]}]\n"])</script><script>self.__next_f.push([1,":HL[\"https://gist.github.com/assets/60120929/5bbb480a-7174-45fe-b0c9-261e521f8e5a\",\"image\"]\n10:[\"$\",\"p\",\"p-1\",{\"children\":[\"The first file contains predefined type and function definitions for our program. The second file contains the description of the castle\\nescape \\\"problem\\\", but with some function calls substituted out for poetic verses about what the function calls \",[\"$\",\"em\",\"em-0\",{\"children\":\"should\"}],\" do.\"]}]\n11:[\"$\",\"p\",\"p-2\",{\"children\":[\"With some hints from the comments, our task seems to be to translate each line into its corresponding \",[\"$\",\"code\",\"code-0\",{\"className\":\"font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]\",\"children\":\"pddl\"}],\" syntax to complete the program and\\nsolve the puzzle.\"]}]\n12:[\"$\",\"blockquote\",\"blockquote-1\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":\";at\"}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":\"In Whispering Gallery begins our tale,\"}],\"\\n\"]}]\n13:[\"$\",\"$Le\",\"pre-2\",{\"className\":\"my-2\",\"children\":\"(at whispering_gallery)\",\"language\":\"pddl\"}]\n14:[\"$\",\"blockquote\",\"blockquote-2\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":\";opens_with\"}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":\"Atop a vault of shadows, silent, steep, topaz, pearl keys awake its sleep.\"}],\"\\n\"]}]\n15:[\"$\",\"$Le\",\"pre-3\",{\"className\":\"my-2\",\"children\":\"(opens_with shadowy_vault topaz_key pearl_key)\",\"language\":\"pddl\"}]\n16:[\"$\",\"p\",\"p-3\",{\"children\":[\"Looking at the definition in the first \",[\"$\",\"code\",\"code-0\",{\"className\":\"font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]\",\"children\":\"pddl\"}],\" file, the \",[\"$\",\"code\",\"code-1\",{\"className\":\"font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]\",\"children\":\"opens_with\"}],\" function takes in a location and the two keys that open it.\"]}]\n17:[\"$\",\"blockquote\",\"blockquote-3\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":\"Crypt sunken 'neath the time's decree, opal, garnet turn the key.\"}],\"\\n\"]}]\n18:[\"$\",\"$Le\",\"pre-4\",{\"className\":\"my-2\",\"children\":\"(opens_with sunken_crypt opal_key garnet_key)\",\"language\":\"pddl\"}]\n19:[\"$\",\"blockquote\",\"blockquote-4\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":\"Cell of frostbound, age-old hex, yields to pearl and onyx's behest.\"}],\"\\n\"]}]\n1a:[\"$\",\"$Le\",\"pre-5\",{\"className\":\"my-2\",\"children\":\"(opens_with frozen_cell pearl_key onyx_key)\",\"language\":\"pddl\"}]\n1b:[\"$\",\"blockquote\",\"blockquote-5\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":\"Bow of Wizard's study, knowledge bound, diamond, topaz keys unwound.\"}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":\"Grove beneath the moonlit sky, amethyst, opal the secrets ply.\"}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"children\":\"Knight's great hall, strong and tall, with moonstone, quartz, its gates do fall.\"}],\"\\n\",[\"$\",\"p\",\"p-3\",{\"children\":\"Golden sanctum's hidden trust, unveiled by sunstone, turquoise's thrust.\"}],\"\\n\"]}]\n1c:[\"$\",\"$Le\",\"pre-6\",{\"className\":\"my-2\",\"children\":\"(opens_with wizards_study diamond_key topaz_key)\\n(opens_with moonlit_grove amethyst_key opal_key)\\n(opens_with knights_hall moonstone_key quartz_key)\\n(opens_with golden_sanctum sunstone_key turquoise_key)\",\"language\":\"pddl\"}]\n1d:[\"$\",\"blockquote\",\"blockquote-6\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":\"Haunted chamber's secrets deep, citrine, agate open keep.\"}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":\"Throne's domain, regal, vast, lapis, agate keys hold fast.\"}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"children\":\"Serpents' nest, coils tight, onyx, sunstone keys ignite.\"}],\"\\n\",[\"$\",\"p\",\"p-3\",{\"children\":\"Silent tomb, whispers cease, obsidian, citrine keys release.\"}],\"\\n\"]}]\n1e:[\"$\",\"$Le\",\"pre-7\",{\"className\":\"my-2\",\"children\":\"(opens_with haunted_chamber citrine_key agate_key)\\n(opens_with forbidden_throne lapis_key agate_key)\\n(opens_with serpents_nest onyx_key sunstone_key)\\n(opens_with silent_tomb obsidian_key citrine_key)\",\"language\":\"pddl\"}]\n1f:[\"$\",\"blockquote\",\"blockquote-7\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":\";has_key\"}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":\"In the gallery that whispers, sapphire key does rest,\"}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"children\":\"With emerald "])</script><script>self.__next_f.push([1,"key beside, in the very same nest.\"}],\"\\n\",[\"$\",\"p\",\"p-3\",{\"children\":\"Ruby key in enchanted hall does dwell,\"}],\"\\n\",[\"$\",\"p\",\"p-4\",{\"children\":\"Sunstone key in the corridor where phantoms tell.\"}],\"\\n\"]}]\n20:[\"$\",\"$Le\",\"pre-8\",{\"className\":\"my-2\",\"children\":\"(has_key sapphire_key whispering_gallery)\\n(has_key emerald_key whispering_gallery) ; serpents nest?\\n(has_key ruby_key enchanted_hall)\\n(has_key sunstone_key phantom_corridor)\",\"language\":\"pddl\"}]\n21:[\"$\",\"p\",\"p-4\",{\"children\":[\"The \",[\"$\",\"code\",\"code-0\",{\"className\":\"font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]\",\"children\":\"has_key\"}],\" function takes in the key as its first argument and the key's location as its second. (The second line was a bit uncertain\\nbecause it used the word \\\"nest\\\", but \\\"very same\\\" implied that it was referring to the same location as the previous instruction.)\"]}]\n22:[\"$\",\"blockquote\",\"blockquote-8\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":\"Onyx key in the crypt, sunken and deep,\"}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":\"Moonstone key in the frozen cell's keep.\"}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"children\":\"Jade key in the hall where knights do parade,\"}],\"\\n\",[\"$\",\"p\",\"p-3\",{\"children\":\"Obsidian key in the crystal cove's shade.\"}],\"\\n\"]}]\n23:[\"$\",\"$Le\",\"pre-9\",{\"className\":\"my-2\",\"children\":\"(has_key onyx_key sunken_crypt)\\n(has_key moonstone_key frozen_cell)\\n(has_key jade_key knights_hall)\\n(has_key obsidian_key crystal_cove)\",\"language\":\"pddl\"}]\n24:[\"$\",\"blockquote\",\"blockquote-9\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":\";blocks\"}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":\"In verse, the castle's blockades we now state,\"}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"children\":\"Each line a path, each path a fate.\"}],\"\\n\"]}]\n25:[\"$\",\"p\",\"p-5\",{\"children\":[\"The \",[\"$\",\"code\",\"code-0\",{\"className\":\"font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]\",\"children\":\"blocks\"}],\" function is a little less clear, because the definition only tells us that it takes two rooms and not necessarily\\nwhich argument corresponds to which. However, assuming that the objects in each line are given in the order they need to be passed\\nto the function (as was true for \",[\"$\",\"code\",\"code-1\",{\"className\":\"font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]\",\"children\":\"has_key\"}],\" and \",[\"$\",\"code\",\"code-2\",{\"className\":\"font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]\",\"children\":\"opens_with\"}],\" earlier),\"]}]\n26:[\"$\",\"blockquote\",\"blockquote-10\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":\"Wizards' study blocks the mirror's gleam,\"}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":\"Moonlit grove blocks the enchanted hall's dream.\"}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"children\":\"Mystic garden blocks the moonlit grove,\"}],\"\\n\",[\"$\",\"p\",\"p-3\",{\"children\":\"Starlit tower blocks the crypt below.\"}],\"\\n\"]}]\n27:[\"$\",\"$Le\",\"pre-10\",{\"className\":\"my-2\",\"children\":\"(blocks wizards_study mirror_chamber)\\n(blocks moonlit_grove enchanted_hall)\\n(blocks mystic_garden moonlit_grove)\\n(blocks starlit_tower sunken_crypt)\",\"language\":\"pddl\"}]\n28:[\"$\",\"blockquote\",\"blockquote-11\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":\"Whispering gallery, enchanted hall blocks,\"}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":\"Enchanted hall, whispering gallery locks.\"}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"children\":\"Mirror chamber, enchanted hall's gate,\"}],\"\\n\",[\"$\",\"p\",\"p-3\",{\"children\":\"Dragon lair, whispering gallery's fate.\"}],\"\\n\"]}]\n29:[\"$\",\"$Le\",\"pre-11\",{\"className\":\"my-2\",\"children\":\"(blocks enchanted_hall whispering_gallery)\\n(blocks whispering_gallery enchanted_hall)\\n(blocks mirror_chamber enchanted_hall)\\n(blocks dragon_lair whispering_gallery)\",\"language\":\"pddl\"}]\n2a:[\"$\",\"p\",\"p-6\",{\"children\":[\"Now it gets complicated, because the sentence structure gets reversed here. Assuming that the function \",[\"$\",\"code\",\"code-0\",{\"className\":\"font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]\",\"children\":\"(blocks a b)\"}],\" corresponds to the\\nsentence \",[\"$\",\"code\",\"code-1\",{\"class"])</script><script>self.__next_f.push([1,"Name\":\"font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]\",\"children\":\"a blocks b\"}],\", the sentence \",[\"$\",\"code\",\"code-2\",{\"className\":\"font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]\",\"children\":\"c, d blocks\"}],\" = \",[\"$\",\"code\",\"code-3\",{\"className\":\"font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]\",\"children\":\"d blocks c\"}],\" must correspond to \",[\"$\",\"code\",\"code-4\",{\"className\":\"font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]\",\"children\":\"(blocks d c)\"}],\".\"]}]\n2b:[\"$\",\"blockquote\",\"blockquote-12\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":\"Frozen cell blocks the dragon's lair,\"}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":\"Phantom corridor, shadowy vault's snare.\"}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"children\":\"Serpents' nest blocks the moonlit grove,\"}],\"\\n\",[\"$\",\"p\",\"p-3\",{\"children\":\"Golden sanctum, moonlit grove's trove.\"}],\"\\n\"]}]\n2c:[\"$\",\"$Le\",\"pre-12\",{\"className\":\"my-2\",\"children\":\"(blocks frozen_cell dragon_lair)\\n(blocks phantom_corridor shadowy_vault)\\n(blocks serpents_nest moonlit_grove)\\n(blocks moonlit_grove golden_sanctum)\",\"language\":\"pddl\"}]\n2d:[\"$\",\"p\",\"p-7\",{\"children\":\"Now they alternate between the regular and flipped sentence structure every line.\"}]\n2e:[\"$\",\"p\",\"p-8\",{\"children\":\"Finally, putting in the goal,\"}]\n2f:[\"$\",\"blockquote\",\"blockquote-13\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":\";goal\"}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":\"And so the goal, clear and true,\"}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"children\":\"To reach the throne, forbidden view\"}],\"\\n\",[\"$\",\"p\",\"p-3\",{\"children\":\"And claim the crown, the kingdom's due.\"}],\"\\n\"]}]\n30:[\"$\",\"$Le\",\"pre-13\",{\"className\":\"my-2\",\"children\":\"(:goal (and\\n    (at forbidden_throne)\\n    ; (has crown)\\n))\",\"language\":\"pddl\"}]\n31:[\"$\",\"p\",\"p-9\",{\"children\":\"(the crown was not defined as an object, so our goal is simply to reach the forbidden throne, despite the other lines in the comment.)\"}]\n32:[\"$\",\"p\",\"p-10\",{\"children\":[\"Now that we have a completed \",[\"$\",\"code\",\"code-0\",{\"className\":\"font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]\",\"children\":\"pddl\"}],\" file, we can run it through the solver mentioned in the challenge description to get this path\\nas a result:\"]}]\n33:[\"$\",\"img\",\"img-0\",{\"width\":898,\"alt\":\"image\",\"src\":\"https://gist.github.com/assets/60120929/5bbb480a-7174-45fe-b0c9-261e521f8e5a\"}]\n34:[\"$\",\"p\",\"p-11\",{\"children\":[\"Looking at every room we enter via the \",[\"$\",\"code\",\"code-0\",{\"className\":\"font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]\",\"children\":\"move\"}],\" command (and remembering that we start in the whispering gallery!), our flag is\"]}]\n35:[\"$\",\"$Le\",\"pre-14\",{\"className\":\"my-2\",\"children\":\"ictf{whenmiwimoshsufrphsekncrmystsiecfo}\",\"language\":\"$undefined\"}]\n36:[\"$\",\"p\",\"p-12\",{\"children\":[\"The final \",[\"$\",\"code\",\"code-0\",{\"className\":\"font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]\",\"children\":\"pddl\"}],\" file should look like\"]}]\n38:T1018,"])</script><script>self.__next_f.push([1,"(define (problem castle_escape_problem)\n    (:domain castle_escape)\n    (:objects\n        whispering_gallery enchanted_hall mirror_chamber dragon_lair wizards_study\n        moonlit_grove shadowy_vault sunken_crypt frozen_cell phantom_corridor\n        serpents_nest knights_hall golden_sanctum crystal_cove mystic_garden\n        starlit_tower silent_tomb echoing_cavern haunted_chamber forbidden_throne - room\n        sapphire_key ruby_key emerald_key diamond_key amethyst_key\n        topaz_key opal_key pearl_key garnet_key onyx_key\n        moonstone_key sunstone_key quartz_key turquoise_key jade_key\n        obsidian_key amber_key citrine_key lapis_key agate_key - key\n    )\n    (:init\n        ;at\n        (at whispering_gallery)\n\n        ;opens_with\n        (opens_with shadowy_vault topaz_key pearl_key)\n        (opens_with sunken_crypt opal_key garnet_key)\n        (opens_with frozen_cell pearl_key onyx_key)\n\n        (opens_with phantom_corridor garnet_key moonstone_key)\n        (opens_with enchanted_hall sapphire_key emerald_key)\n        (opens_with mirror_chamber ruby_key diamond_key)\n        (opens_with dragon_lair emerald_key amethyst_key)\n\n        (opens_with wizards_study diamond_key topaz_key)\n        (opens_with moonlit_grove amethyst_key opal_key)\n        (opens_with knights_hall moonstone_key quartz_key)\n        (opens_with golden_sanctum sunstone_key turquoise_key)\n\n        (opens_with crystal_cove quartz_key jade_key)\n        (opens_with mystic_garden turquoise_key obsidian_key)\n        (opens_with starlit_tower jade_key amber_key)\n        (opens_with echoing_cavern amber_key lapis_key)\n\n        (opens_with haunted_chamber citrine_key agate_key)\n        (opens_with forbidden_throne lapis_key agate_key)\n        (opens_with serpents_nest onyx_key sunstone_key)\n        (opens_with silent_tomb obsidian_key citrine_key)\n\n        ;has_key\n        (has_key sapphire_key whispering_gallery)\n        (has_key emerald_key whispering_gallery) ; serpents nest?\n        (has_key ruby_key enchanted_hall)\n        (has_key sunstone_key phantom_corridor)\n\n        (has_key quartz_key serpents_nest)\n        (has_key opal_key wizards_study)\n        (has_key pearl_key moonlit_grove)\n        (has_key garnet_key shadowy_vault)\n\n        (has_key onyx_key sunken_crypt)\n        (has_key moonstone_key frozen_cell)\n        (has_key jade_key knights_hall)\n        (has_key obsidian_key crystal_cove)\n\n        (has_key amber_key mystic_garden)\n        (has_key citrine_key starlit_tower)\n        (has_key lapis_key silent_tomb)\n        (has_key agate_key echoing_cavern)\n\n        (has_key turquoise_key knights_hall)\n        (has_key diamond_key enchanted_hall)\n        (has_key diamond_key mirror_chamber)\n        (has_key amethyst_key mirror_chamber)\n        (has_key topaz_key mirror_chamber)\n        (has_key topaz_key wizards_study)\n\n        ;blocks\n        ; In verse, the castle's blockades we now state,\n        ; Each line a path, each path a fate.\n\n        (blocks wizards_study mirror_chamber)\n        (blocks moonlit_grove enchanted_hall)\n        (blocks mystic_garden moonlit_grove)\n        (blocks starlit_tower sunken_crypt)\n\n        (blocks silent_tomb shadowy_vault)\n        (blocks echoing_cavern moonlit_grove)\n        (blocks haunted_chamber wizards_study)\n        (blocks forbidden_throne whispering_gallery)\n\n        (blocks enchanted_hall whispering_gallery)\n        (blocks whispering_gallery enchanted_hall)\n        (blocks mirror_chamber enchanted_hall)\n        (blocks dragon_lair whispering_gallery)\n\n        (blocks knights_hall serpents_nest)\n        (blocks crystal_cove serpents_nest)\n        (blocks shadowy_vault wizards_study)\n        (blocks sunken_crypt enchanted_hall)\n\n        (blocks frozen_cell dragon_lair)\n        (blocks phantom_corridor shadowy_vault)\n        (blocks serpents_nest moonlit_grove)\n        (blocks moonlit_grove golden_sanctum)\n    )\n    ;goal\n    (:goal (and\n        (at forbidden_throne)\n        ; (has crown)\n    ))\n    ; And so the goal, clear and true,\n    ; To reach the throne, forbidden view\n    ; And claim the crown, the kingdom's due.\n)"])</script><script>self.__next_f.push([1,"37:[\"$\",\"$Le\",\"pre-15\",{\"className\":\"my-2\",\"children\":\"$38\",\"language\":\"pddl\"}]\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"title\",\"0\",{\"children\":\"iCTF 2023 — Mystical Castle | kevin.fish\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"In the mystical realm of Eldoria, a land shrouded in legends and whispered secrets, there lived a young adventurer named Alex. With a heart full of curiosity and a spirit as wild as the wind, Alex had always been drawn to the tales of old, the kind that grandparents would recount by the flickering fireside on starless nights. Among these tales, one stood out - the story of the ancient Castle of Shadows, a place where time seemed to stand still, and where every corridor and chamber held a secret waiting to be uncovered.\"}],[\"$\",\"meta\",\"2\",{\"property\":\"og:title\",\"content\":\"iCTF 2023 — Mystical Castle\"}],[\"$\",\"meta\",\"3\",{\"property\":\"og:description\",\"content\":\"In the mystical realm of Eldoria, a land shrouded in legends and whispered secrets, there lived a young adventurer named Alex. With a heart full of curiosity and a spirit as wild as the wind, Alex had always been drawn to the tales of old, the kind that grandparents would recount by the flickering fireside on starless nights. Among these tales, one stood out - the story of the ancient Castle of Shadows, a place where time seemed to stand still, and where every corridor and chamber held a secret waiting to be uncovered.\"}],[\"$\",\"meta\",\"4\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"5\",{\"name\":\"twitter:title\",\"content\":\"iCTF 2023 — Mystical Castle\"}],[\"$\",\"meta\",\"6\",{\"name\":\"twitter:description\",\"content\":\"In the mystical realm of Eldoria, a land shrouded in legends and whispered secrets, there lived a young adventurer named Alex. With a heart full of curiosity and a spirit as wild as the wind, Alex had always been drawn to the tales of old, the kind that grandparents would recount by the flickering fireside on starless nights. Among these tales, one stood out - the story of the ancient Castle of Shadows, a place where time seemed to stand still, and where every corridor and chamber held a secret waiting to be uncovered.\"}]]\n"])</script><script>self.__next_f.push([1,"8:null\n"])</script></body></html>
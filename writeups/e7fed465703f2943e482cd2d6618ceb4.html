<!DOCTYPE html><!--DfvEc75fs5QFxpmscM4_K--><html class="dark scroll-smooth jetbrains_mono_cc80ae23-module__2tkX8G__variable"><head><meta charSet="utf-8"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/70bc3e132a0a741e-s.p.15008bfb.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/83afe278b6a6bb3c-s.p.3a6ba036.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="https://gist.github.com/assets/60120929/498dea08-696d-4f31-ad8c-387738aec7f4" as="image"/><link rel="preload" href="https://gist.github.com/assets/60120929/822f3710-b8c1-4986-900f-14902caca46b" as="image"/><link rel="preload" href="https://gist.github.com/assets/60120929/e4abd511-7cbc-4ed3-ada8-e7b529276d2e" as="image"/><link rel="preload" href="https://gist.github.com/assets/60120929/43a907d7-a646-41df-8261-37797dd67963" as="image"/><link rel="preload" href="https://gist.github.com/assets/60120929/3476550b-1706-404f-b3f4-a22c015c7ae4" as="image"/><link rel="preload" href="https://gist.github.com/assets/60120929/94c2c5a6-439d-46ad-9ab3-9397945cac53" as="image"/><link rel="preload" href="https://gist.github.com/assets/60120929/e3ca9bf1-50e2-4746-8e01-7c5e1af23d35" as="image"/><link rel="preload" href="https://gist.github.com/assets/60120929/49b0a335-2e33-47ac-aad2-b7a529afa24d" as="image"/><link rel="preload" href="https://gist.github.com/assets/60120929/8d0bbb81-fdb4-4863-9e90-7e7d52603301" as="image"/><link rel="preload" href="https://gist.github.com/assets/60120929/1520c457-59a6-4215-95de-5965778692a0" as="image"/><link rel="stylesheet" href="/_next/static/chunks/287f55c41d4b73fe.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/db0065a56c1501a2.js"/><script src="/_next/static/chunks/50345d6dfb1ec50f.js" async=""></script><script src="/_next/static/chunks/9fa23de75f8cf547.js" async=""></script><script src="/_next/static/chunks/81a372860285e4d9.js" async=""></script><script src="/_next/static/chunks/turbopack-d4fa0e05098c3e45.js" async=""></script><script src="/_next/static/chunks/ff1a16fafef87110.js" async=""></script><script src="/_next/static/chunks/b71c1cfea9076b4b.js" async=""></script><script src="/_next/static/chunks/b9afcb09c56609a6.js" async=""></script><script src="/_next/static/chunks/59d5dd52dd9fcb16.js" async=""></script><script src="/_next/static/chunks/0eb309e820c00a6d.js" async=""></script><script src="/_next/static/chunks/a6b27ecf1b9e9188.js" async=""></script><script src="/_next/static/chunks/39b99946d2be6a43.js" async=""></script><link rel="preload" href="https://gist.github.com/assets/60120929/67a294ce-2880-41e7-a270-30c04085bd70" as="image"/><link rel="preload" href="https://gist.github.com/assets/60120929/2104ef6f-6b84-468a-8f47-7c87a0cdba2b" as="image"/><meta name="next-size-adjust" content=""/><title>iCTF 2023 — IslandParty | kevin.fish</title><meta name="description" content="You open your mailbox and find a strange postcard (invite.bmp). Flipping it around, you squint your eyes and try to decipher the wobbly handwriting:"/><meta property="og:title" content="iCTF 2023 — IslandParty"/><meta property="og:description" content="You open your mailbox and find a strange postcard (invite.bmp). Flipping it around, you squint your eyes and try to decipher the wobbly handwriting:"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="iCTF 2023 — IslandParty"/><meta name="twitter:description" content="You open your mailbox and find a strange postcard (invite.bmp). Flipping it around, you squint your eyes and try to decipher the wobbly handwriting:"/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="text-dark dark:text-white dark:bg-midnight" style="font-family:&#x27;Inter&#x27;, &#x27;Inter Fallback&#x27;;font-style:normal"><div hidden=""><!--$--><!--/$--></div><main class="container pt-20 pb-24"><a class="text-secondary text-sm mb-10 -ml-5 block w-max" href="/writeups">← Back to writeups</a><div><main class="text-pretty max-w-5xl mx-auto text-sm [&amp;_h1]:text-5xl [&amp;_h1]:font-semibold [&amp;_h1]:mb-8 [&amp;_blockquote]:text-secondary [&amp;_blockquote]:space-y-3 [&amp;_blockquote]:border-l-4 [&amp;_blockquote]:border-secondary [&amp;_blockquote]:pl-5 [&amp;_blockquote]:mb-5 [&amp;&gt;_p]:my-4 [&amp;_img]:my-5 [&amp;_ul]:list-disc [&amp;_ul]:pl-6 [&amp;_ol]:list-decimal [&amp;_ol]:pl-6 [&amp;_img]:rounded [&amp;_li]:my-2"><h1>iCTF 2023 — IslandParty</h1>
<blockquote>
<p>You open your mailbox and find a strange postcard (invite.bmp). Flipping it around, you squint your eyes and try to decipher the wobbly handwriting:</p>
<p>...</p>
<p>MYSTERIOUS INVITE: &#x27;Generative AI is all the rage this days, so I couldn&#x27;t pass up the opportunity to use it for this year&#x27;s invite. Have you heard models like Google&#x27;s Imagen will include a hidden watermark on AI generated images? I might not have algorithms quite as fancy as Google&#x27;s, but I&#x27;ve also encoded a little something into this invite--the address! Decode it, and you&#x27;ll be more than welcome to attend.&#x27;</p>
<p>...</p>
<p>MYSTERIOUS INVITE: &#x27;One last piece of advice. All great thing come in three. Three sides to a triangle, three wise monkeys, three lights in a stoplight. Let the number three guide you, and you shall find my island.&#x27;</p>
</blockquote>
<p>We&#x27;re given the following image, within which is encoded data about the flag:</p>
<p align="center">
  <img src="https://gist.github.com/assets/60120929/498dea08-696d-4f31-ad8c-387738aec7f4" width="600px"/>
</p>
<h6>(the above image has been converted from a <code class="font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]">.bmp</code> to a <code class="font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]">.jpg</code> for GitHub, and likely won&#x27;t work with the rest of this writeup)</h6>
<p>Examining the histograms for this image yield some interesting results:</p>
<div class="border border-white/10 rounded-lg my-2"><p class="font-jetbrains flex items-center text-xs rounded-t-lg px-3 py-0.5 text-secondary"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" class="text-sm mr-1.5" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M14.25.18l.9.2.73.26.59.3.45.32.34.34.25.34.16.33.1.3.04.26.02.2-.01.13V8.5l-.05.63-.13.55-.21.46-.26.38-.3.31-.33.25-.35.19-.35.14-.33.1-.3.07-.26.04-.21.02H8.77l-.69.05-.59.14-.5.22-.41.27-.33.32-.27.35-.2.36-.15.37-.1.35-.07.32-.04.27-.02.21v3.06H3.17l-.21-.03-.28-.07-.32-.12-.35-.18-.36-.26-.36-.36-.35-.46-.32-.59-.28-.73-.21-.88-.14-1.05-.05-1.23.06-1.22.16-1.04.24-.87.32-.71.36-.57.4-.44.42-.33.42-.24.4-.16.36-.1.32-.05.24-.01h.16l.06.01h8.16v-.83H6.18l-.01-2.75-.02-.37.05-.34.11-.31.17-.28.25-.26.31-.23.38-.2.44-.18.51-.15.58-.12.64-.1.71-.06.77-.04.84-.02 1.27.05zm-6.3 1.98l-.23.33-.08.41.08.41.23.34.33.22.41.09.41-.09.33-.22.23-.34.08-.41-.08-.41-.23-.33-.33-.22-.41-.09-.41.09zm13.09 3.95l.28.06.32.12.35.18.36.27.36.35.35.47.32.59.28.73.21.88.14 1.04.05 1.23-.06 1.23-.16 1.04-.24.86-.32.71-.36.57-.4.45-.42.33-.42.24-.4.16-.36.09-.32.05-.24.02-.16-.01h-8.22v.82h5.84l.01 2.76.02.36-.05.34-.11.31-.17.29-.25.25-.31.24-.38.2-.44.17-.51.15-.58.13-.64.09-.71.07-.77.04-.84.01-1.27-.04-1.07-.14-.9-.2-.73-.25-.59-.3-.45-.33-.34-.34-.25-.34-.16-.33-.1-.3-.04-.25-.02-.2.01-.13v-5.34l.05-.64.13-.54.21-.46.26-.38.3-.32.33-.24.35-.2.35-.14.33-.1.3-.06.26-.04.21-.02.13-.01h5.84l.69-.05.59-.14.5-.21.41-.28.33-.32.27-.35.2-.36.15-.36.1-.35.07-.32.04-.28.02-.21V6.07h2.09l.14.01zm-6.47 14.25l-.23.33-.08.41.08.41.23.33.33.23.41.08.41-.08.33-.23.23-.33.08-.41-.08-.41-.23-.33-.33-.23-.41-.08-.41.08z"></path></svg> <!-- -->py<button class="ml-auto hover:underline">(copy)</button></p><div class="rounded-b-lg overflow-hidden text-xs"><pre class="prismjs"><code style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">1</span><span class="token keyword">import</span><span class=""> cv2
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">2</span><span class=""></span><span class="token keyword">import</span><span class=""> numpy </span><span class="token keyword">as</span><span class=""> np
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">3</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">4</span><span class=""></span><span class="token keyword">import</span><span class=""> matplotlib
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">5</span><span class=""></span><span class="token keyword">import</span><span class=""> matplotlib</span><span class="token punctuation">.</span><span class="">pyplot </span><span class="token keyword">as</span><span class=""> plt
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">6</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">7</span><span class="">matplotlib</span><span class="token punctuation">.</span><span class="">use</span><span class="token punctuation">(</span><span class="token string">&#x27;tkagg&#x27;</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">8</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">9</span><span class="">use_cv2_hist </span><span class="token operator">=</span><span class=""> </span><span class="token boolean">False</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">10</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">11</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">12</span><span class=""></span><span class="token keyword">def</span><span class=""> </span><span class="token function">make_histogram</span><span class="token punctuation">(</span><span class="">img</span><span class="token punctuation">:</span><span class=""> np</span><span class="token punctuation">.</span><span class="">ndarray</span><span class="token punctuation">,</span><span class=""> title</span><span class="token punctuation">:</span><span class=""> </span><span class="token builtin">str</span><span class="token punctuation">,</span><span class=""> n</span><span class="token punctuation">:</span><span class=""> </span><span class="token builtin">int</span><span class="token punctuation">,</span><span class=""> lim</span><span class="token punctuation">:</span><span class=""> </span><span class="token builtin">int</span><span class=""> </span><span class="token operator">=</span><span class=""> </span><span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">13</span><span class="">    dims </span><span class="token operator">=</span><span class=""> </span><span class="token builtin">len</span><span class="token punctuation">(</span><span class="">img</span><span class="token punctuation">.</span><span class="">shape</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">14</span><span class="">    channel </span><span class="token operator">=</span><span class=""> n </span><span class="token operator">-</span><span class=""> </span><span class="token number">1</span><span class=""> </span><span class="token keyword">if</span><span class=""> dims </span><span class="token operator">==</span><span class=""> </span><span class="token number">3</span><span class=""> </span><span class="token keyword">else</span><span class=""> </span><span class="token number">0</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">15</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">16</span><span class="">    </span><span class="token keyword">if</span><span class=""> n </span><span class="token operator">!=</span><span class=""> </span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">17</span><span class="">        plt</span><span class="token punctuation">.</span><span class="">subplot</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class=""> </span><span class="token number">1</span><span class="token punctuation">,</span><span class=""> n</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">18</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">19</span><span class="">    </span><span class="token keyword">if</span><span class=""> use_cv2_hist</span><span class="token punctuation">:</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">20</span><span class="">        plt</span><span class="token punctuation">.</span><span class="">plot</span><span class="token punctuation">(</span><span class="">cv2</span><span class="token punctuation">.</span><span class="">calcHist</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="">img</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class=""> </span><span class="token punctuation">[</span><span class="">channel</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class=""> </span><span class="token boolean">None</span><span class="token punctuation">,</span><span class=""> </span><span class="token punctuation">[</span><span class="">lim</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class=""> </span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class=""> lim</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">21</span><span class="">    </span><span class="token keyword">else</span><span class="token punctuation">:</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">22</span><span class="">        data </span><span class="token operator">=</span><span class=""> img</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class=""> </span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class=""> channel</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="">ravel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class=""> </span><span class="token keyword">if</span><span class=""> dims </span><span class="token operator">==</span><span class=""> </span><span class="token number">3</span><span class=""> </span><span class="token keyword">else</span><span class=""> img</span><span class="token punctuation">.</span><span class="">ravel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">23</span><span class="">        plt</span><span class="token punctuation">.</span><span class="">hist</span><span class="token punctuation">(</span><span class="">data</span><span class="token punctuation">,</span><span class=""> bins</span><span class="token operator">=</span><span class="token number">256</span><span class="token punctuation">,</span><span class=""> </span><span class="token builtin">range</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class=""> </span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">24</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">25</span><span class="">    plt</span><span class="token punctuation">.</span><span class="">ylabel</span><span class="token punctuation">(</span><span class="token string">&#x27;Occurrences&#x27;</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">26</span><span class="">    plt</span><span class="token punctuation">.</span><span class="">xlim</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class=""> lim</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">27</span><span class="">    plt</span><span class="token punctuation">.</span><span class="">title</span><span class="token punctuation">(</span><span class="">title</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">28</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">29</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">30</span><span class=""></span><span class="token keyword">def</span><span class=""> </span><span class="token function">show_img</span><span class="token punctuation">(</span><span class="">img</span><span class="token punctuation">:</span><span class=""> np</span><span class="token punctuation">.</span><span class="">ndarray</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">31</span><span class="">    make_histogram</span><span class="token punctuation">(</span><span class="">img</span><span class="token punctuation">,</span><span class=""> </span><span class="token string">&quot;Reds&quot;</span><span class="token punctuation">,</span><span class=""> </span><span class="token number">1</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">32</span><span class="">    make_histogram</span><span class="token punctuation">(</span><span class="">img</span><span class="token punctuation">,</span><span class=""> </span><span class="token string">&quot;Greens&quot;</span><span class="token punctuation">,</span><span class=""> </span><span class="token number">2</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">33</span><span class="">    make_histogram</span><span class="token punctuation">(</span><span class="">img</span><span class="token punctuation">,</span><span class=""> </span><span class="token string">&quot;Blues&quot;</span><span class="token punctuation">,</span><span class=""> </span><span class="token number">3</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">34</span><span class="">    plt</span><span class="token punctuation">.</span><span class="">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">35</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">36</span><span class="">    img2 </span><span class="token operator">=</span><span class=""> cv2</span><span class="token punctuation">.</span><span class="">cvtColor</span><span class="token punctuation">(</span><span class="">img</span><span class="token punctuation">,</span><span class=""> cv2</span><span class="token punctuation">.</span><span class="">COLOR_RGB2HSV</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">37</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">38</span><span class="">    make_histogram</span><span class="token punctuation">(</span><span class="">img2</span><span class="token punctuation">,</span><span class=""> </span><span class="token string">&quot;Hues&quot;</span><span class="token punctuation">,</span><span class=""> </span><span class="token number">1</span><span class="token punctuation">,</span><span class=""> lim</span><span class="token operator">=</span><span class="token number">180</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">39</span><span class="">    make_histogram</span><span class="token punctuation">(</span><span class="">img2</span><span class="token punctuation">,</span><span class=""> </span><span class="token string">&quot;Saturations&quot;</span><span class="token punctuation">,</span><span class=""> </span><span class="token number">2</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">40</span><span class="">    make_histogram</span><span class="token punctuation">(</span><span class="">img2</span><span class="token punctuation">,</span><span class=""> </span><span class="token string">&quot;Values&quot;</span><span class="token punctuation">,</span><span class=""> </span><span class="token number">3</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">41</span><span class="">    plt</span><span class="token punctuation">.</span><span class="">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">42</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">43</span><span class="">    img3 </span><span class="token operator">=</span><span class=""> cv2</span><span class="token punctuation">.</span><span class="">cvtColor</span><span class="token punctuation">(</span><span class="">img</span><span class="token punctuation">,</span><span class=""> cv2</span><span class="token punctuation">.</span><span class="">COLOR_RGB2GRAY</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">44</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">45</span><span class="">    make_histogram</span><span class="token punctuation">(</span><span class="">img3</span><span class="token punctuation">,</span><span class=""> </span><span class="token string">&quot;Intensities&quot;</span><span class="token punctuation">,</span><span class=""> </span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">46</span><span class="">    plt</span><span class="token punctuation">.</span><span class="">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">47</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">48</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">49</span><span class="">img </span><span class="token operator">=</span><span class=""> cv2</span><span class="token punctuation">.</span><span class="">imread</span><span class="token punctuation">(</span><span class="token string">&#x27;invite.bmp&#x27;</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">50</span><span class="">img </span><span class="token operator">=</span><span class=""> cv2</span><span class="token punctuation">.</span><span class="">cvtColor</span><span class="token punctuation">(</span><span class="">img</span><span class="token punctuation">,</span><span class=""> cv2</span><span class="token punctuation">.</span><span class="">COLOR_BGR2RGB</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3.25em;padding-right:1em;text-align:right;user-select:none">51</span><span class="">show_img</span><span class="token punctuation">(</span><span class="">img</span><span class="token punctuation">)</span></code></pre></div></div>
<p><img src="https://gist.github.com/assets/60120929/822f3710-b8c1-4986-900f-14902caca46b" alt="Figure_d3"/>
<img src="https://gist.github.com/assets/60120929/e4abd511-7cbc-4ed3-ada8-e7b529276d2e" alt="Figure_d2"/></p>
<p>A clue is that the invite image features the <a href="https://en.m.wikipedia.org/wiki/File:DALL-E_2_Signature.svg">DALL-E 2 signature</a>, telling us what
it was generated with. Going to the <a href="https://labs.openai.com/">DALL-E 2 website</a> (you&#x27;ll need to sign in) and scrolling down the list of examples,
we find the original &quot;otter with pearl earring&quot; image:</p>
<img width="1248" alt="image (11)" src="https://gist.github.com/assets/60120929/43a907d7-a646-41df-8261-37797dd67963"/>
<p align="center">
  <img src="https://gist.github.com/assets/60120929/3476550b-1706-404f-b3f4-a22c015c7ae4" width="600px"/>
</p>
<h6>(the above image has been converted from a <code class="font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]">.webp</code> to a <code class="font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]">.jpg</code> for GitHub, and might not work with the rest of this writeup)</h6>
<p>Now that we have the original, we can compare its histograms to those of our invite; notice how the semi-periodic dips in RGB are gone.</p>
<p><img src="https://gist.github.com/assets/60120929/94c2c5a6-439d-46ad-9ab3-9397945cac53" alt="Figure_g"/></p>
<p>This hints that we should taking the diff between the two images. Doing so yields this vibrant mess:</p>
<div class="border border-white/10 rounded-lg my-2"><p class="font-jetbrains flex items-center text-xs rounded-t-lg px-3 py-0.5 text-secondary"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" class="text-sm mr-1.5" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M14.25.18l.9.2.73.26.59.3.45.32.34.34.25.34.16.33.1.3.04.26.02.2-.01.13V8.5l-.05.63-.13.55-.21.46-.26.38-.3.31-.33.25-.35.19-.35.14-.33.1-.3.07-.26.04-.21.02H8.77l-.69.05-.59.14-.5.22-.41.27-.33.32-.27.35-.2.36-.15.37-.1.35-.07.32-.04.27-.02.21v3.06H3.17l-.21-.03-.28-.07-.32-.12-.35-.18-.36-.26-.36-.36-.35-.46-.32-.59-.28-.73-.21-.88-.14-1.05-.05-1.23.06-1.22.16-1.04.24-.87.32-.71.36-.57.4-.44.42-.33.42-.24.4-.16.36-.1.32-.05.24-.01h.16l.06.01h8.16v-.83H6.18l-.01-2.75-.02-.37.05-.34.11-.31.17-.28.25-.26.31-.23.38-.2.44-.18.51-.15.58-.12.64-.1.71-.06.77-.04.84-.02 1.27.05zm-6.3 1.98l-.23.33-.08.41.08.41.23.34.33.22.41.09.41-.09.33-.22.23-.34.08-.41-.08-.41-.23-.33-.33-.22-.41-.09-.41.09zm13.09 3.95l.28.06.32.12.35.18.36.27.36.35.35.47.32.59.28.73.21.88.14 1.04.05 1.23-.06 1.23-.16 1.04-.24.86-.32.71-.36.57-.4.45-.42.33-.42.24-.4.16-.36.09-.32.05-.24.02-.16-.01h-8.22v.82h5.84l.01 2.76.02.36-.05.34-.11.31-.17.29-.25.25-.31.24-.38.2-.44.17-.51.15-.58.13-.64.09-.71.07-.77.04-.84.01-1.27-.04-1.07-.14-.9-.2-.73-.25-.59-.3-.45-.33-.34-.34-.25-.34-.16-.33-.1-.3-.04-.25-.02-.2.01-.13v-5.34l.05-.64.13-.54.21-.46.26-.38.3-.32.33-.24.35-.2.35-.14.33-.1.3-.06.26-.04.21-.02.13-.01h5.84l.69-.05.59-.14.5-.21.41-.28.33-.32.27-.35.2-.36.15-.36.1-.35.07-.32.04-.28.02-.21V6.07h2.09l.14.01zm-6.47 14.25l-.23.33-.08.41.08.41.23.33.33.23.41.08.41-.08.33-.23.23-.33.08-.41-.08-.41-.23-.33-.33-.23-.41-.08-.41.08z"></path></svg> <!-- -->py<button class="ml-auto hover:underline">(copy)</button></p><div class="rounded-b-lg overflow-hidden text-xs"><pre class="prismjs"><code style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">1</span><span class="">img </span><span class="token operator">=</span><span class=""> cv2</span><span class="token punctuation">.</span><span class="">imread</span><span class="token punctuation">(</span><span class="token string">&#x27;original.webp&#x27;</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">2</span><span class=""></span><span class="token comment"># img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">3</span><span class=""></span><span class="token comment"># show_img(img)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">4</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">5</span><span class="">img2 </span><span class="token operator">=</span><span class=""> cv2</span><span class="token punctuation">.</span><span class="">imread</span><span class="token punctuation">(</span><span class="token string">&#x27;invite.bmp&#x27;</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">6</span><span class=""></span><span class="token comment"># img2 = cv2.cvtColor(img2, cv2.COLOR_BGR2RGB)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">7</span><span class=""></span><span class="token comment"># show_img(img2)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">8</span>
<span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">9</span><span class="">diff </span><span class="token operator">=</span><span class=""> img2 </span><span class="token operator">-</span><span class=""> img
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">10</span><span class="">cv2</span><span class="token punctuation">.</span><span class="">imwrite</span><span class="token punctuation">(</span><span class="token string">&#x27;invite_diff.jpg&#x27;</span><span class="token punctuation">,</span><span class=""> diff</span><span class="token punctuation">)</span><span class="">
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:2.25em;padding-right:1em;text-align:right;user-select:none">11</span><span class=""></span><span class="token comment"># show_img(diff)</span></code></pre></div></div>
<p><img src="https://gist.github.com/assets/60120929/e3ca9bf1-50e2-4746-8e01-7c5e1af23d35" alt="invite_diff"/></p>
<h6>(can you make out some digits already? :eyes:)</h6>
<p>The challenge description mentioned groups of 3, which might just be related to the 3 channels of a color image.
Splitting this diff into its R, G, and B channels gives</p>
<p align="center">
  <img src="https://gist.github.com/assets/60120929/49b0a335-2e33-47ac-aad2-b7a529afa24d" width="290px"/> <img src="https://gist.github.com/assets/60120929/8d0bbb81-fdb4-4863-9e90-7e7d52603301" width="290px"/> <img src="https://gist.github.com/assets/60120929/1520c457-59a6-4215-95de-5965778692a0" width="290px"/>
</p>
<p>and summing these channels with overflow results in the following:</p>
<p><img src="https://gist.github.com/assets/60120929/67a294ce-2880-41e7-a270-30c04085bd70" alt="invite_diff_combined"/></p>
<p>From here, the encoded pattern becomes slightly more discernable. You can make use of the fact that the pattern seems to repeat every
2 rows and columns to disambiguate noisy characters. Inspecting this pattern carefully gives the coordinates of the island:</p>
<div class="border border-white/10 rounded-lg my-2"><p class="font-jetbrains flex items-center text-xs rounded-t-lg px-3 py-0.5 text-secondary">Code<button class="ml-auto hover:underline">(copy)</button></p><div class="rounded-b-lg overflow-hidden text-xs"><pre class="prismjs"><code style="white-space:pre"><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">1</span><span class="">22.441N
</span><span class="comment linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:1.25em;padding-right:1em;text-align:right;user-select:none">2</span>74.220W</code></pre></div></div>
<img width="1083" alt="image" src="https://gist.github.com/assets/60120929/2104ef6f-6b84-468a-8f47-7c87a0cdba2b"/></main></div><!--$--><!--/$--></main><script src="/_next/static/chunks/db0065a56c1501a2.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[39756,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/b71c1cfea9076b4b.js\"],\"default\"]\n3:I[37457,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/b71c1cfea9076b4b.js\"],\"default\"]\n4:I[22016,[\"/_next/static/chunks/b9afcb09c56609a6.js\"],\"\"]\n6:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/b71c1cfea9076b4b.js\"],\"OutletBoundary\"]\n7:\"$Sreact.suspense\"\n9:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/b71c1cfea9076b4b.js\"],\"ViewportBoundary\"]\nb:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/b71c1cfea9076b4b.js\"],\"MetadataBoundary\"]\nd:I[68027,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/b71c1cfea9076b4b.js\"],\"default\"]\n:HL[\"/_next/static/chunks/287f55c41d4b73fe.css\",\"style\"]\n:HL[\"/_next/static/media/70bc3e132a0a741e-s.p.15008bfb.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/83afe278b6a6bb3c-s.p.3a6ba036.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"DfvEc75fs5QFxpmscM4-K\",\"c\":[\"\",\"writeups\",\"e7fed465703f2943e482cd2d6618ceb4\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"writeups\",{\"children\":[[\"id\",\"e7fed465703f2943e482cd2d6618ceb4\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/287f55c41d4b73fe.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"className\":\"dark scroll-smooth jetbrains_mono_cc80ae23-module__2tkX8G__variable\",\"children\":[[\"$\",\"head\",null,{\"children\":[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}]}],[\"$\",\"body\",null,{\"className\":\"text-dark dark:text-white dark:bg-midnight\",\"style\":{\"fontFamily\":\"'Inter', 'Inter Fallback'\",\"fontStyle\":\"normal\"},\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"div\",null,{\"className\":\"h-screen flex items-center justify-center\",\"children\":[\"$\",\"main\",null,{\"className\":\"relative pl-14\",\"children\":[[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 512 512\",\"className\":\"absolute left-0 top-2 text-5xl text-grapefruit\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M256 48C140.559 48 48 140.559 48 256c0 115.436 92.559 208 208 208 115.435 0 208-92.564 208-208 0-115.441-92.564-208-208-208zm104.002 282.881l-29.12 29.117L256 285.117l-74.881 74.881-29.121-29.117L226.881 256l-74.883-74.881 29.121-29.116L256 226.881l74.881-74.878 29.12 29.116L285.119 256l74.883 74.881z\",\"children\":[]}]]],\"style\":{\"color\":\"$undefined\"},\"height\":\"1em\",\"width\":\"1em\",\"xmlns\":\"http://www.w3.org/2000/svg\"}],[\"$\",\"h1\",null,{\"className\":\"font-bold text-7xl underline decoration-grapefruit mb-5\",\"children\":\"404.\"}],[\"$\",\"p\",null,{\"children\":\"Your requested page was not found.\"}],[\"$\",\"$L4\",null,{\"href\":\"/\",\"className\":\"font-medium text-inherit\",\"children\":\"Return to home →\"}]]}]}],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"main\",null,{\"className\":\"container pt-20 pb-24\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/b9afcb09c56609a6.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[[\"$\",\"$L4\",null,{\"href\":\"/writeups\",\"className\":\"text-secondary text-sm mb-10 -ml-5 block w-max\",\"children\":\"← Back to writeups\"}],[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/59d5dd52dd9fcb16.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/0eb309e820c00a6d.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-2\",{\"src\":\"/_next/static/chunks/a6b27ecf1b9e9188.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-3\",{\"src\":\"/_next/static/chunks/39b99946d2be6a43.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"$L6\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@8\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L9\",null,{\"children\":\"$@a\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@c\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",[]],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"e:I[10453,[\"/_next/static/chunks/b9afcb09c56609a6.js\",\"/_next/static/chunks/59d5dd52dd9fcb16.js\",\"/_next/static/chunks/0eb309e820c00a6d.js\",\"/_next/static/chunks/a6b27ecf1b9e9188.js\",\"/_next/static/chunks/39b99946d2be6a43.js\"],\"default\"]\n:HL[\"https://gist.github.com/assets/60120929/498dea08-696d-4f31-ad8c-387738aec7f4\",\"image\"]\nf:T489,import cv2\nimport numpy as np\n\nimport matplotlib\nimport matplotlib.pyplot as plt\n\nmatplotlib.use('tkagg')\n\nuse_cv2_hist = False\n\n\ndef make_histogram(img: np.ndarray, title: str, n: int, lim: int = 256):\n    dims = len(img.shape)\n    channel = n - 1 if dims == 3 else 0\n\n    if n != -1:\n        plt.subplot(3, 1, n)\n\n    if use_cv2_hist:\n        plt.plot(cv2.calcHist([img], [channel], None, [lim], [0, lim]))\n    else:\n        data = img[:, :, channel].ravel() if dims == 3 else img.ravel()\n        plt.hist(data, bins=256, range=(0, 255))\n\n    plt.ylabel('Occurrences')\n    plt.xlim([0, lim])\n    plt.title(title)\n\n\ndef show_img(img: np.ndarray):\n    make_histogram(img, \"Reds\", 1)\n    make_histogram(img, \"Greens\", 2)\n    make_histogram(img, \"Blues\", 3)\n    plt.show()\n\n    img2 = cv2.cvtColor(img, cv2.COLOR_RGB2HSV)\n\n    make_histogram(img2, \"Hues\", 1, lim=180)\n    make_histogram(img2, \"Saturations\", 2)\n    make_histogram(img2, \"Values\", 3)\n    plt.show()\n\n    img3 = cv2.cvtColor(img, cv2.COLOR_RGB2GRAY)\n\n    make_histogram(img3, \"Intensities\", -1)\n    plt.show()\n\n\nimg = cv2.imread('invite.bmp')\nimg = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)\nshow_img(img)"])</script><script>self.__next_f.push([1,"5:[\"$\",\"div\",null,{\"children\":[\"$\",\"main\",null,{\"className\":\"text-pretty max-w-5xl mx-auto text-sm [\u0026_h1]:text-5xl [\u0026_h1]:font-semibold [\u0026_h1]:mb-8 [\u0026_blockquote]:text-secondary [\u0026_blockquote]:space-y-3 [\u0026_blockquote]:border-l-4 [\u0026_blockquote]:border-secondary [\u0026_blockquote]:pl-5 [\u0026_blockquote]:mb-5 [\u0026\u003e_p]:my-4 [\u0026_img]:my-5 [\u0026_ul]:list-disc [\u0026_ul]:pl-6 [\u0026_ol]:list-decimal [\u0026_ol]:pl-6 [\u0026_img]:rounded [\u0026_li]:my-2\",\"children\":[[\"$\",\"h1\",\"h1-0\",{\"children\":\"iCTF 2023 — IslandParty\"}],\"\\n\",[\"$\",\"blockquote\",\"blockquote-0\",{\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":\"You open your mailbox and find a strange postcard (invite.bmp). Flipping it around, you squint your eyes and try to decipher the wobbly handwriting:\"}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":\"...\"}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"children\":\"MYSTERIOUS INVITE: 'Generative AI is all the rage this days, so I couldn't pass up the opportunity to use it for this year's invite. Have you heard models like Google's Imagen will include a hidden watermark on AI generated images? I might not have algorithms quite as fancy as Google's, but I've also encoded a little something into this invite--the address! Decode it, and you'll be more than welcome to attend.'\"}],\"\\n\",[\"$\",\"p\",\"p-3\",{\"children\":\"...\"}],\"\\n\",[\"$\",\"p\",\"p-4\",{\"children\":\"MYSTERIOUS INVITE: 'One last piece of advice. All great thing come in three. Three sides to a triangle, three wise monkeys, three lights in a stoplight. Let the number three guide you, and you shall find my island.'\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":\"We're given the following image, within which is encoded data about the flag:\"}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"align\":\"center\",\"children\":[\"\\n  \",[\"$\",\"img\",\"img-0\",{\"src\":\"https://gist.github.com/assets/60120929/498dea08-696d-4f31-ad8c-387738aec7f4\",\"width\":\"600px\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h6\",\"h6-0\",{\"children\":[\"(the above image has been converted from a \",[\"$\",\"code\",\"code-0\",{\"className\":\"font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]\",\"children\":\".bmp\"}],\" to a \",[\"$\",\"code\",\"code-1\",{\"className\":\"font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]\",\"children\":\".jpg\"}],\" for GitHub, and likely won't work with the rest of this writeup)\"]}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"children\":\"Examining the histograms for this image yield some interesting results:\"}],\"\\n\",[\"$\",\"$Le\",\"pre-0\",{\"className\":\"my-2\",\"children\":\"$f\",\"language\":\"py\"}],\"\\n\",\"$L10\",\"\\n\",\"$L11\",\"\\n\",\"$L12\",\"\\n\",\"$L13\",\"\\n\",\"$L14\",\"\\n\",\"$L15\",\"\\n\",\"$L16\",\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\",\"\\n\",\"$L1a\",\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\",\"\\n\",\"$L21\"]}]}]\n"])</script><script>self.__next_f.push([1,":HL[\"https://gist.github.com/assets/60120929/822f3710-b8c1-4986-900f-14902caca46b\",\"image\"]\n:HL[\"https://gist.github.com/assets/60120929/e4abd511-7cbc-4ed3-ada8-e7b529276d2e\",\"image\"]\n:HL[\"https://gist.github.com/assets/60120929/43a907d7-a646-41df-8261-37797dd67963\",\"image\"]\n:HL[\"https://gist.github.com/assets/60120929/3476550b-1706-404f-b3f4-a22c015c7ae4\",\"image\"]\n:HL[\"https://gist.github.com/assets/60120929/94c2c5a6-439d-46ad-9ab3-9397945cac53\",\"image\"]\n:HL[\"https://gist.github.com/assets/60120929/e3ca9bf1-50e2-4746-8e01-7c5e1af23d35\",\"image\"]\n:HL[\"https://gist.github.com/assets/60120929/49b0a335-2e33-47ac-aad2-b7a529afa24d\",\"image\"]\n:HL[\"https://gist.github.com/assets/60120929/8d0bbb81-fdb4-4863-9e90-7e7d52603301\",\"image\"]\n:HL[\"https://gist.github.com/assets/60120929/1520c457-59a6-4215-95de-5965778692a0\",\"image\"]\n:HL[\"https://gist.github.com/assets/60120929/67a294ce-2880-41e7-a270-30c04085bd70\",\"image\"]\n:HL[\"https://gist.github.com/assets/60120929/2104ef6f-6b84-468a-8f47-7c87a0cdba2b\",\"image\"]\n10:[\"$\",\"p\",\"p-3\",{\"children\":[[\"$\",\"img\",\"img-0\",{\"src\":\"https://gist.github.com/assets/60120929/822f3710-b8c1-4986-900f-14902caca46b\",\"alt\":\"Figure_d3\"}],\"\\n\",[\"$\",\"img\",\"img-1\",{\"src\":\"https://gist.github.com/assets/60120929/e4abd511-7cbc-4ed3-ada8-e7b529276d2e\",\"alt\":\"Figure_d2\"}]]}]\n11:[\"$\",\"p\",\"p-4\",{\"children\":[\"A clue is that the invite image features the \",[\"$\",\"a\",\"a-0\",{\"href\":\"https://en.m.wikipedia.org/wiki/File:DALL-E_2_Signature.svg\",\"children\":\"DALL-E 2 signature\"}],\", telling us what\\nit was generated with. Going to the \",[\"$\",\"a\",\"a-1\",{\"href\":\"https://labs.openai.com/\",\"children\":\"DALL-E 2 website\"}],\" (you'll need to sign in) and scrolling down the list of examples,\\nwe find the original \\\"otter with pearl earring\\\" image:\"]}]\n12:[\"$\",\"img\",\"img-0\",{\"width\":1248,\"alt\":\"image (11)\",\"src\":\"https://gist.github.com/assets/60120929/43a907d7-a646-41df-8261-37797dd67963\"}]\n13:[\"$\",\"p\",\"p-5\",{\"align\":\"center\",\"children\":[\"\\n  \",[\"$\",\"img\",\"img-0\",{\"src\":\"https://gist.github.com/assets/60120929/3476550b-1706-404f-b3f4-a22c015c7ae4\",\"width\":\"600px\"}],\"\\n\"]}]\n14:[\"$\",\"h6\",\"h6-1\",{\"children\":[\"(the above image has been converted from a \",[\"$\",\"code\",\"code-0\",{\"className\":\"font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]\",\"children\":\".webp\"}],\" to a \",[\"$\",\"code\",\"code-1\",{\"className\":\"font-jetbrains opacity-75 bg-black/10 dark:bg-black/30 rounded px-1.5 py-1 text-[0.9em]\",\"children\":\".jpg\"}],\" for GitHub, and might not work with the rest of this writeup)\"]}]\n15:[\"$\",\"p\",\"p-6\",{\"children\":\"Now that we have the original, we can compare its histograms to those of our invite; notice how the semi-periodic dips in RGB are gone.\"}]\n16:[\"$\",\"p\",\"p-7\",{\"children\":[\"$\",\"img\",\"img-0\",{\"src\":\"https://gist.github.com/assets/60120929/94c2c5a6-439d-46ad-9ab3-9397945cac53\",\"alt\":\"Figure_g\"}]}]\n17:[\"$\",\"p\",\"p-8\",{\"children\":\"This hints that we should taking the diff between the two images. Doing so yields this vibrant mess:\"}]\n18:[\"$\",\"$Le\",\"pre-1\",{\"className\":\"my-2\",\"children\":\"img = cv2.imread('original.webp')\\n# img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)\\n# show_img(img)\\n\\nimg2 = cv2.imread('invite.bmp')\\n# img2 = cv2.cvtColor(img2, cv2.COLOR_BGR2RGB)\\n# show_img(img2)\\n\\ndiff = img2 - img\\ncv2.imwrite('invite_diff.jpg', diff)\\n# show_img(diff)\",\"language\":\"py\"}]\n19:[\"$\",\"p\",\"p-9\",{\"children\":[\"$\",\"img\",\"img-0\",{\"src\":\"https://gist.github.com/assets/60120929/e3ca9bf1-50e2-4746-8e01-7c5e1af23d35\",\"alt\":\"invite_diff\"}]}]\n1a:[\"$\",\"h6\",\"h6-2\",{\"children\":\"(can you make out some digits already? :eyes:)\"}]\n1b:[\"$\",\"p\",\"p-10\",{\"children\":\"The challenge description mentioned groups of 3, which might just be related to the 3 channels of a color image.\\nSplitting this diff into its R, G, and B channels gives\"}]\n1c:[\"$\",\"p\",\"p-11\",{\"align\":\"center\",\"children\":[\"\\n  \",[\"$\",\"img\",\"img-0\",{\"src\":\"https://gist.github.com/assets/60120929/49b0a335-2e33-47ac-aad2-b7a529afa24d\",\"width\":\"290px\"}],\" \",[\"$\",\"img\",\"img-1\",{\"src\":\"https://gist.github.com/assets/60120929/8d0bbb81-fdb4-4863-9e90-7e7d52603301\",\"width\":\"2"])</script><script>self.__next_f.push([1,"90px\"}],\" \",[\"$\",\"img\",\"img-2\",{\"src\":\"https://gist.github.com/assets/60120929/1520c457-59a6-4215-95de-5965778692a0\",\"width\":\"290px\"}],\"\\n\"]}]\n1d:[\"$\",\"p\",\"p-12\",{\"children\":\"and summing these channels with overflow results in the following:\"}]\n1e:[\"$\",\"p\",\"p-13\",{\"children\":[\"$\",\"img\",\"img-0\",{\"src\":\"https://gist.github.com/assets/60120929/67a294ce-2880-41e7-a270-30c04085bd70\",\"alt\":\"invite_diff_combined\"}]}]\n1f:[\"$\",\"p\",\"p-14\",{\"children\":\"From here, the encoded pattern becomes slightly more discernable. You can make use of the fact that the pattern seems to repeat every\\n2 rows and columns to disambiguate noisy characters. Inspecting this pattern carefully gives the coordinates of the island:\"}]\n20:[\"$\",\"$Le\",\"pre-2\",{\"className\":\"my-2\",\"children\":\"22.441N\\n74.220W\",\"language\":\"$undefined\"}]\n21:[\"$\",\"img\",\"img-1\",{\"width\":1083,\"alt\":\"image\",\"src\":\"https://gist.github.com/assets/60120929/2104ef6f-6b84-468a-8f47-7c87a0cdba2b\"}]\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"title\",\"0\",{\"children\":\"iCTF 2023 — IslandParty | kevin.fish\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"You open your mailbox and find a strange postcard (invite.bmp). Flipping it around, you squint your eyes and try to decipher the wobbly handwriting:\"}],[\"$\",\"meta\",\"2\",{\"property\":\"og:title\",\"content\":\"iCTF 2023 — IslandParty\"}],[\"$\",\"meta\",\"3\",{\"property\":\"og:description\",\"content\":\"You open your mailbox and find a strange postcard (invite.bmp). Flipping it around, you squint your eyes and try to decipher the wobbly handwriting:\"}],[\"$\",\"meta\",\"4\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"5\",{\"name\":\"twitter:title\",\"content\":\"iCTF 2023 — IslandParty\"}],[\"$\",\"meta\",\"6\",{\"name\":\"twitter:description\",\"content\":\"You open your mailbox and find a strange postcard (invite.bmp). Flipping it around, you squint your eyes and try to decipher the wobbly handwriting:\"}]]\n8:null\n"])</script></body></html>